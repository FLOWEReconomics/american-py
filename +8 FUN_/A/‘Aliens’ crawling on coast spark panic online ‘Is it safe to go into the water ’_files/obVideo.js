!function(){var e,t,i={8048:function(e,t,i){"use strict";var r=i(8081),n=i.n(r),o=i(3645),a=i.n(o)()(n());a.push([e.id,'div[id^=wrapperContainerForShadowDom_],.obv-video-wrapper{position:relative}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper,.obv-video-wrapper .ob-player-wrapper{z-index:1;top:0;margin-right:auto;margin-left:auto;display:flex;flex-direction:column;position:relative}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.in-widget,.obv-video-wrapper .ob-player-wrapper.in-widget{position:absolute}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.above-widget,.obv-video-wrapper .ob-player-wrapper.above-widget{margin-bottom:20px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.below-widget,.obv-video-wrapper .ob-player-wrapper.below-widget{margin-top:20px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.obv-hide-wrapper,.obv-video-wrapper .ob-player-wrapper.obv-hide-wrapper{visibility:hidden;position:absolute;z-index:-999999999999}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky .ob-inner-player-wrapper,.obv-video-wrapper .ob-player-wrapper.ob-sticky .ob-inner-player-wrapper{overflow:visible}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .ob-inner-player-wrapper,.obv-video-wrapper .ob-player-wrapper .ob-inner-player-wrapper{flex:1;overflow:hidden;max-height:100%;max-width:100%}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .ob-inner-player-wrapper .ob-player,.obv-video-wrapper .ob-player-wrapper .ob-inner-player-wrapper .ob-player{width:100%;height:100%;display:none}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .ob-inner-player-wrapper .ob-player.obv-playing,.obv-video-wrapper .ob-player-wrapper .ob-inner-player-wrapper .ob-player.obv-playing{display:block}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-title-wrapper,.obv-video-wrapper .ob-player-wrapper .obv-title-wrapper{padding:8px 6px 0;font-size:14px;color:#000}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper{position:absolute;direction:ltr !important;bottom:18%;right:0;z-index:3;border-radius:2px;border:solid .5px rgba(255,255,255,.7);background-color:rgba(0,0,0,.8);cursor:pointer;font-family:Lato,"sans-serif";font-size:12px;display:flex;align-items:center;color:#fff;gap:8px;padding:8px;line-height:1}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button{bottom:30%}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>span:first-child,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>span:first-child{font-size:13px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>.obv-skip-icon,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>.obv-skip-icon{font-size:10px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>.obv-skip-icon:after,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>.obv-skip-icon:after{font-size:12px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper>span:first-child,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper>span:first-child{direction:ltr !important;font-family:Arial,"sans-serif";font-size:18px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper>.obv-skip-icon,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper>.obv-skip-icon{font-size:12px;position:relative}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper>.obv-skip-icon:after,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper>.obv-skip-icon:after{content:"â½";font-size:14px;margin-left:1px}div[id^=wrapperContainerForShadowDom_] #skip-btn,.obv-video-wrapper #skip-btn{display:none !important}',""]),t.Z=a},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",r=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),r&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),r&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,r,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(a[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},8081:function(e){"use strict";e.exports=function(e){return e[1]}},6515:function(e,t,i){"use strict";i.d(t,{X:function(){return n}});var r=i(655),n=function(e){function t(t){var i=e.call(this)||this;return i._value=t,i}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var i=e.prototype._subscribe.call(this,t);return!i.closed&&t.next(this._value),i},t.prototype.getValue=function(){var e=this,t=e.hasError,i=e.thrownError,r=e._value;if(t)throw i;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i(6716).x)},1480:function(e,t,i){"use strict";i.d(t,{y:function(){return u}});var r=i(5642),n=i(5720),o=i(6766),a=i(278);function s(e){return 0===e.length?a.y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var d=i(3912),l=i(8474),c=i(8846),u=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var o,a=this,s=(o=e)&&o instanceof r.Lv||function(e){return e&&(0,l.m)(e.next)&&(0,l.m)(e.error)&&(0,l.m)(e.complete)}(o)&&(0,n.Nn)(o)?e:new r.Hp(e,t,i);return(0,c.x)((function(){var e=a,t=e.operator,i=e.source;s.add(t?t.call(s,i):i?a._subscribe(s):a._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=g(t))((function(t,n){var o=new r.Hp({next:function(t){try{e(t)}catch(e){n(e),o.unsubscribe()}},error:n,complete:t});i.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=g(e))((function(e,i){var r;t.subscribe((function(e){return r=e}),(function(e){return i(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function g(e){var t;return null!==(t=null!=e?e:d.v.Promise)&&void 0!==t?t:Promise}},6716:function(e,t,i){"use strict";i.d(t,{x:function(){return l}});var r=i(655),n=i(1480),o=i(5720),a=(0,i(1819).d)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),s=i(3699),d=i(8846),l=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.ZT)(t,e),t.prototype.lift=function(e){var t=new c(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new a},t.prototype.next=function(e){var t=this;(0,d.x)((function(){var i,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,r.XA)(t.currentObservers),a=o.next();!a.done;a=o.next()){a.value.next(e)}}catch(e){i={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}}}))},t.prototype.error=function(e){var t=this;(0,d.x)((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var i=t.observers;i.length;)i.shift().error(e)}}))},t.prototype.complete=function(){var e=this;(0,d.x)((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,i=this,r=i.hasError,n=i.isStopped,a=i.observers;return r||n?o.Lc:(this.currentObservers=null,a.push(e),new o.w0((function(){t.currentObservers=null,(0,s.P)(a,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,i=t.hasError,r=t.thrownError,n=t.isStopped;i?e.error(r):n&&e.complete()},t.prototype.asObservable=function(){var e=new n.y;return e.source=this,e},t.create=function(e,t){return new c(e,t)},t}(n.y),c=function(e){function t(t,i){var r=e.call(this)||this;return r.destination=t,r.source=i,r}return(0,r.ZT)(t,e),t.prototype.next=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)},t.prototype.error=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:o.Lc},t}(l)},5642:function(e,t,i){"use strict";i.d(t,{Hp:function(){return f},Lv:function(){return p}});var r=i(655),n=i(8474),o=i(5720),a=i(3912),s=i(5);function d(){}var l=c("C",void 0,void 0);function c(e,t,i){return{kind:e,value:t,error:i}}var u=i(8380),g=i(8846),p=function(e){function t(t){var i=e.call(this)||this;return i.isStopped=!1,t?(i.destination=t,(0,o.Nn)(t)&&t.add(i)):i.destination=b,i}return(0,r.ZT)(t,e),t.create=function(e,t,i){return new f(e,t,i)},t.prototype.next=function(e){this.isStopped?w(function(e){return c("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?w(c("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?w(l,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(o.w0),h=Function.prototype.bind;function v(e,t){return h.call(e,t)}var y=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){m(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){m(e)}else m(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){m(e)}},e}(),f=function(e){function t(t,i,r){var o,s,d=e.call(this)||this;(0,n.m)(t)||!t?o={next:null!=t?t:void 0,error:null!=i?i:void 0,complete:null!=r?r:void 0}:d&&a.v.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return d.unsubscribe()},o={next:t.next&&v(t.next,s),error:t.error&&v(t.error,s),complete:t.complete&&v(t.complete,s)}):o=t;return d.destination=new y(o),d}return(0,r.ZT)(t,e),t}(p);function m(e){a.v.useDeprecatedSynchronousErrorHandling?(0,g.O)(e):(0,s.h)(e)}function w(e,t){var i=a.v.onStoppedNotification;i&&u.z.setTimeout((function(){return i(e,t)}))}var b={closed:!0,next:d,error:function(e){throw e},complete:d}},5720:function(e,t,i){"use strict";i.d(t,{Lc:function(){return d},w0:function(){return s},Nn:function(){return l}});var r=i(655),n=i(8474),o=(0,i(1819).d)((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}})),a=i(3699),s=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,i,a,s;if(!this.closed){this.closed=!0;var d=this._parentage;if(d)if(this._parentage=null,Array.isArray(d))try{for(var l=(0,r.XA)(d),u=l.next();!u.done;u=l.next()){u.value.remove(this)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else d.remove(this);var g=this.initialTeardown;if((0,n.m)(g))try{g()}catch(e){s=e instanceof o?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var h=(0,r.XA)(p),v=h.next();!v.done;v=h.next()){var y=v.value;try{c(y)}catch(e){s=null!=s?s:[],e instanceof o?s=(0,r.ev)((0,r.ev)([],(0,r.CR)(s)),(0,r.CR)(e.errors)):s.push(e)}}}catch(e){i={error:e}}finally{try{v&&!v.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}if(s)throw new o(s)}},e.prototype.add=function(t){var i;if(t&&t!==this)if(this.closed)c(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,a.P)(t,e)},e.prototype.remove=function(t){var i=this._finalizers;i&&(0,a.P)(i,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),d=s.EMPTY;function l(e){return e instanceof s||e&&"closed"in e&&(0,n.m)(e.remove)&&(0,n.m)(e.add)&&(0,n.m)(e.unsubscribe)}function c(e){(0,n.m)(e)?e():e.unsubscribe()}},3912:function(e,t,i){"use strict";i.d(t,{v:function(){return r}});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8639:function(e,t,i){"use strict";i.d(t,{P:function(){return u},z:function(){return c}});var r=i(655),n=function(e){function t(t,i){return e.call(this)||this}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i(5720).w0),o={setInterval:function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var a=o.delegate;return(null==a?void 0:a.setInterval)?a.setInterval.apply(a,(0,r.ev)([e,t],(0,r.CR)(i))):setInterval.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(i)))},clearInterval:function(e){var t=o.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},a=i(3699),s=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.scheduler=t,r.work=i,r.pending=!1,r}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){var i;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),o.setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,t,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&o.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var i,r=!1;try{this.work(e)}catch(e){r=!0,i=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,i=this.scheduler,r=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,a.P)(r,this),null!=t&&(this.id=this.recycleAsyncId(i,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(n),d={now:function(){return(d.delegate||Date).now()},delegate:void 0},l=function(){function e(t,i){void 0===i&&(i=e.now),this.schedulerActionCtor=t,this.now=i}return e.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},e.now=d.now,e}(),c=new(function(e){function t(t,i){void 0===i&&(i=l.now);var r=e.call(this,t,i)||this;return r.actions=[],r._active=!1,r}return(0,r.ZT)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}},t}(l))(s),u=c},8380:function(e,t,i){"use strict";i.d(t,{z:function(){return n}});var r=i(655),n={setTimeout:function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=n.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,(0,r.ev)([e,t],(0,r.CR)(i))):setTimeout.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(i)))},clearTimeout:function(e){var t=n.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},6766:function(e,t,i){"use strict";i.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},3699:function(e,t,i){"use strict";function r(e,t){if(e){var i=e.indexOf(t);0<=i&&e.splice(i,1)}}i.d(t,{P:function(){return r}})},1819:function(e,t,i){"use strict";function r(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}i.d(t,{d:function(){return r}})},8846:function(e,t,i){"use strict";i.d(t,{O:function(){return a},x:function(){return o}});var r=i(3912),n=null;function o(e){if(r.v.useDeprecatedSynchronousErrorHandling){var t=!n;if(t&&(n={errorThrown:!1,error:null}),e(),t){var i=n,o=i.errorThrown,a=i.error;if(n=null,o)throw a}}else e()}function a(e){r.v.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=e)}},278:function(e,t,i){"use strict";function r(e){return e}i.d(t,{y:function(){return r}})},8474:function(e,t,i){"use strict";function r(e){return"function"==typeof e}i.d(t,{m:function(){return r}})},5:function(e,t,i){"use strict";i.d(t,{h:function(){return o}});var r=i(3912),n=i(8380);function o(e){n.z.setTimeout((function(){var t=r.v.onUnhandledError;if(!t)throw e;t(e)}))}},3379:function(e){"use strict";var t=[];function i(e){for(var i=-1,r=0;r<t.length;r++)if(t[r].identifier===e){i=r;break}return i}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var d=e[s],l=r.base?d[0]+r.base:d[0],c=o[l]||0,u="".concat(l," ").concat(c);o[l]=c+1;var g=i(u),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==g)t[g].references++,t[g].updater(p);else{var h=n(p,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:h,references:1})}a.push(u)}return a}function n(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var o=r(e=e||[],n=n||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=i(o[a]);t[s].references--}for(var d=r(e,n),l=0;l<o.length;l++){var c=i(o[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=d}}},569:function(e){"use strict";var t={};e.exports=function(e,i){var r=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},9216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,i){"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,n&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},7656:function(){"use strict";window.OB_VIDEO_VERSION="v1.82.0"},4528:function(e,t,i){"use strict";i.d(t,{dj:function(){return o},fP:function(){return n}});var r=i(4452);const n={providers:{[r.B.Aniview]:{providerPath:"aniview/index"},[r.B.Vidazoo]:{providerPath:"vidazoo/index"},[r.B.OPA]:{providerPath:"opa/index"},[r.B.NATIVETOVIDEO]:{providerPath:"n2v/index"},[r.B.VI]:{providerPath:"vi/index"}}},o={Prod:"https://videoevents.outbrain.com/events/recordOBV",Sim:"https://sim-eventsrecorder.outbrain.com/EventsRecorder/api/events/recordOBV"};t.ZP=n},8178:function(e,t,i){"use strict";i.d(t,{d:function(){return a}});var r=i(2798),n=i(4452),o=i(4453);const a={providers:[{defaultProvider:!0,name:n.B.OPA,pauseOutOfView:!1,playMode:r.Z.Load,currentPlayMode:o.w.OutOfView,playWaitingTime:4e3},{defaultProvider:!0,name:n.B.Vidazoo,pauseOutOfView:!1,playMode:r.Z.Load,currentPlayMode:o.w.OutOfView,playWaitingTime:3e3},{defaultProvider:!0,name:n.B.Aniview,pauseOutOfView:!1,playMode:r.Z.Load,currentPlayMode:o.w.OutOfView,playWaitingTime:3e3},{defaultProvider:!1,name:n.B.VI,pauseOutOfView:!1,playMode:r.Z.Load,currentPlayMode:o.w.OutOfView,playWaitingTime:null},{defaultProvider:!1,name:n.B.NATIVETOVIDEO,pauseOutOfView:!1,playMode:r.Z.View,currentPlayMode:o.w.OutOfView,playWaitingTime:3e3}]}},5022:function(e,t,i){"use strict";var r;i.d(t,{t:function(){return r}}),function(e){e.Lazy="regular",e.Eager="slider",e.Override="sliderAlwaysRight",e.NoScroll="noScroll"}(r||(r={}))},4453:function(e,t,i){"use strict";i.d(t,{J:function(){return E},w:function(){return f}});var r=i(6716),n=i(8639),o=i(8474);function a(e){return function(t){if(function(e){return(0,o.m)(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var s=i(655),d=i(5642);function l(e,t,i,r,n){return new c(e,t,i,r,n)}var c=function(e){function t(t,i,r,n,o,a){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=i?function(e){try{i(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return(0,s.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(d.Lv);var u=i(278);function g(e,t){return e===t}function p(e){return a((function(t,i){try{t.subscribe(i)}finally{i.add(e)}}))}var h=i(1480),v=i(6766);var y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";var f,m=i(5);function w(e){if(e instanceof h.y)return e;if(null!=e){if(function(e){return(0,o.m)(e[v.L])}(e))return d=e,new h.y((function(e){var t=d[v.L]();if((0,o.m)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((a=e)&&"number"==typeof a.length&&"function"!=typeof a)return n=e,new h.y((function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()}));if(r=e,(0,o.m)(null==r?void 0:r.then))return i=e,new h.y((function(e){i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,m.h)}));if(function(e){return Symbol.asyncIterator&&(0,o.m)(null==e?void 0:e[Symbol.asyncIterator])}(e))return b(e);if(function(e){return(0,o.m)(null==e?void 0:e[y])}(e))return t=e,new h.y((function(e){var i,r;try{for(var n=(0,s.XA)(t),o=n.next();!o.done;o=n.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}e.complete()}));if(function(e){return(0,o.m)(null==e?void 0:e.getReader)}(e))return b(function(e){return(0,s.FC)(this,arguments,(function(){var t,i,r;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,(0,s.qq)(t.read())];case 3:return i=n.sent(),r=i.value,i.done?[4,(0,s.qq)(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,(0,s.qq)(r)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,i,r,n,a,d;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function b(e){return new h.y((function(t){(function(e,t){var i,r,n,o;return(0,s.mG)(this,void 0,void 0,(function(){var a,d;return(0,s.Jh)(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),i=(0,s.KL)(e),l.label=1;case 1:return[4,i.next()];case 2:if((r=l.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return d=l.sent(),n={error:d},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=i.return)?[4,o.call(i)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function P(e){void 0===e&&(e={});var t=e.connector,i=void 0===t?function(){return new r.x}:t,n=e.resetOnError,o=void 0===n||n,s=e.resetOnComplete,l=void 0===s||s,c=e.resetOnRefCountZero,u=void 0===c||c;return function(e){var t,r,n,s=0,c=!1,g=!1,p=function(){null==r||r.unsubscribe(),r=void 0},h=function(){p(),t=n=void 0,c=g=!1},v=function(){var e=t;h(),null==e||e.unsubscribe()};return a((function(e,a){s++,g||c||p();var y=n=null!=n?n:i();a.add((function(){0!==--s||g||c||(r=S(v,u))})),y.subscribe(a),!t&&s>0&&(t=new d.Hp({next:function(e){return y.next(e)},error:function(e){g=!0,p(),r=S(h,o,e),y.error(e)},complete:function(){c=!0,p(),r=S(h,l),y.complete()}}),w(e).subscribe(t))}))(e)}}function S(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(!0!==t){if(!1!==t){var n=new d.Hp({next:function(){n.unsubscribe(),e()}});return t.apply(void 0,(0,s.ev)([],(0,s.CR)(i))).subscribe(n)}}else e()}!function(e){e[e.OutOfView=0]="OutOfView",e[e.InView=1]="InView"}(f||(f={}));class E{static debounceTime=500;static elementInViewChange(e,t){if(!window.IntersectionObserver)return new r.x;const i=new r.x,o=new r.x;let s=new IntersectionObserver((e=>{o.next(e)}),{root:null,rootMargin:"0px",threshold:isNaN(t.threshold)?1:t.threshold});var d,c,h,v;return s.observe(e),o.pipe((h=t.debounce||E.debounceTime,void 0===v&&(v=n.z),a((function(e,t){var i=null,r=null,n=null,o=function(){if(i){i.unsubscribe(),i=null;var e=r;r=null,t.next(e)}};function a(){var e=n+h,r=v.now();if(r<e)return i=this.schedule(void 0,e-r),void t.add(i);o()}e.subscribe(l(t,(function(e){r=e,n=v.now(),i||(i=v.schedule(a,h),t.add(i))}),(function(){o(),t.complete()}),void 0,(function(){r=i=null})))}))),(d=(e,t)=>e[0].isIntersecting===t[0].isIntersecting,void 0===c&&(c=u.y),d=null!=d?d:g,a((function(e,t){var i,r=!0;e.subscribe(l(t,(function(e){var n=c(e);!r&&d(i,n)||(r=!1,i=n,t.next(e))})))})))).subscribe((e=>{i.next(e[0].isIntersecting?f.InView:f.OutOfView)})),i.pipe(p((()=>{o.unsubscribe(),s.disconnect()})),P())}static measureViewability(e,t){if(!window.IntersectionObserver)return new r.x;let i;const n=new r.x;let o=new IntersectionObserver((e=>{e[0].isIntersecting?i=setTimeout((()=>{((e,t)=>{e.disconnect(),n.next(t.intersectionRatio)})(o,e[0])}),t.timeInMilliseconds):i&&clearTimeout(i)}),{root:null,rootMargin:"0px",threshold:t.threshold||1});return o.observe(e),n.pipe(p((()=>{i&&clearTimeout(i),o?.disconnect()})),P())}}},3736:function(e,t,i){"use strict";var r;i.d(t,{t:function(){return r}}),function(e){e.Loaded="VIDGET_LOADED",e.AdLoaded="VIDGET_AD_LOADED",e.Viewability="VIDGET_VIEWABILITY",e.Play="PLAY",e.Pause="PAUSE",e.Resume="RESUME",e.Complete="COMPLETE",e.Click="CLICK",e.Mute="MUTE",e.Unmute="UNMUTE",e.Close="CLOSE",e.Error="ERROR",e.FirstQuartile="FIRST_QUARTILE",e.SecondQuartile="SECOND_QUARTILE",e.ThirdQuartile="THIRD_QUARTILE",e.Skip="SKIP",e.EngagedPlay="ENGAGED_PLAY",e.PixelFired="PIXEL_FIRED",e.Debug="VIDGET_DEBUG",e.VideoRejected="VIDEO_REJECTED",e.Verbose="VIDGET_VERBOSE",e.Pending="VIDGET_PENDING",e.IterationCanceled="VIDGET_ITERATION_CANCELED",e.Ready="READY",e.SliderSkipped="SLIDER_SKIPPED",e.ProviderPass="PROVIDER_PASS",e.StartRequest="VIDGET_START_REQ",e.PlayReadyRequest="VIDGET_START_READY",e.FillCount="FILL_COUNT",e.KeepWatching="KEEP_WATCHING",e.VidgetConfigError="VIDGET_CONFIG_ERROR",e.VidgetFailure="VIDGET_FAILURE",e.ProviderFailure="PROVIDER_FAILURE",e.vidgetLog="VIDGET_LOG",e.VidgetFeature="VIDGET_FEATURE",e.ReportClick="REPORT_CLICK",e.VidgetReport="VIDGET_REPORT"}(r||(r={}))},5259:function(e,t,i){"use strict";var r;i.d(t,{i:function(){return r}}),function(e){e[e.INFO=0]="INFO",e[e.DEBUG=1]="DEBUG",e[e.VERBOSE=2]="VERBOSE"}(r||(r={}))},6022:function(e,t,i){"use strict";var r;i.d(t,{t:function(){return r}}),function(e){e.None="none",e.AfterEach="afterEach",e.AfterAll="afterAll"}(r||(r={}))},3058:function(e,t,i){"use strict";var r;i.d(t,{b:function(){return r}}),function(e){e.Avoid="avoid",e.Strict="strict",e.Allow="allow",e.AllowInstream="allow instream",e.AvoidInViewport="avoid in viewport"}(r||(r={}))},2753:function(e,t,i){"use strict";var r;i.d(t,{h:function(){return r}}),function(e){e.InWidget="inWidget",e.AboveWidget="aboveWidget",e.BelowWidget="belowWidget",e.Midroll="midroll"}(r||(r={}))},4452:function(e,t,i){"use strict";var r;i.d(t,{B:function(){return r}}),function(e){e.Aniview="Aniview",e.Vidazoo="Vidazoo",e.OPA="OPA",e.VI="VI",e.NATIVETOVIDEO="NATIVETOVIDEO"}(r||(r={}))},2798:function(e,t,i){"use strict";var r;i.d(t,{Z:function(){return r}}),function(e){e.Load="auto-play",e.View="in-view",e.ViewPreload="in-view-preload"}(r||(r={}))},9202:function(e,t,i){"use strict";var r;i.d(t,{S:function(){return r}}),function(e){e[e.none=0]="none",e[e.outstream=1]="outstream",e[e.instream=2]="instream"}(r||(r={}))},8347:function(e,t,i){"use strict";var r;i.d(t,{o:function(){return r}}),function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(r||(r={}))},7917:function(e,t,i){"use strict";i.r(t),i.d(t,{ViStaticSettings:function(){return o}});var r=i(8178),n=i(4452);const o={actualReloadCount:10,configuredReloadCount:10,configuredReloadTime:10,isSyndicationAllowed:!0,isVideoReel:!0,playerLocation:"aboveWidget",providers:[r.d.providers.find((e=>e.name===n.B.VI))],vidgetContentSource:"syndication",vidgetFootprint:"standard",recMode:"odb_dynamic_video-reel"}},5148:function(e,t){"use strict";class i{static loadScript(e,t="head"){return new Promise(((i,r)=>{const n=document.createElement("script");n.src=e,n.onload=i,n.onerror=r,document.getElementsByTagName(t)[0].appendChild(n)}))}static isMobile(){return/(iphone|ipod|symbian|android|windows ce|blackberry|palm|ipad)/.test(navigator.userAgent.toLowerCase())}static nodeToString(e){let t=document.createElement("div");t.appendChild(e.cloneNode(!0));let i=t.innerHTML;return t=e=null,i}static viewPercentage(e){if(!e)return 0;let t=e.getBoundingClientRect(),r=i.getViewportSizeGlobal().height,n=e.clientHeight;if(!n)return 0;const o=t.top,a=t.top+n;let s=0;if(o>0){if(o>r)return 0;if(a<r)return 100;s=r-o}else{if(a<0)return 0;s=a>r?r:a}return Math.round(100*s/n)}static getViewportSizeGlobal(){let e,t,i,r={height:0,width:0};return e=void 0!==window.innerWidth,t=void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth,i=!1===e&&!1===t,e?(r.height=window.innerHeight,r.width=window.innerWidth):t?(r.height=document?.documentElement.clientHeight,r.width=document?.documentElement.clientWidth):i&&(r.height=document.getElementsByTagName("body")[0].clientHeight,r.width=document.getElementsByTagName("body")[0].clientWidth),r}static performRandomWithBalance(e){let t=0,i=[];if(!e)return null;for(let r in e)t+=e[r],i.push({name:r,balance:e[r]});t<1&&(i[0].balance+=1-t),t>1&&(i[0].balance-=t-1);const r=Math.random();for(let e=0,t=0;e<i.length;e++){let n=i[e];if(r<n.balance+t)return n.name;t+=n.balance}return null}static isIframe(){try{return window.self!==window.top}catch(e){return console.error(e),!0}}static guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}static firePassbackScript(e,t){const i=document.createRange().createContextualFragment(e);document.body.appendChild(i),document.querySelector(`[data-widget-id="${t}"]`)?.remove()}static getSubtree(e){return e.shadowRoot||e}static firePixels(e,t,r,n,o){e.forEach((e=>{e=i.replaceMacros(e,t,r,n);(new Image).src=e,o&&o(e)}))}static replaceMacros(e,t,r,n){return e=i.replaceAll(e,"{{widget_id}}",t.widgetID),e=i.replaceAll(e,"{{publisher_id}}",r.publisherId),e=i.replaceAll(e,"{{rand}}",(Math.random()+1).toString(36).substring(2)),e=i.replaceAll(e,"{{req_id}}",t.reqID),e=i.replaceAll(e,"{{publisher_name}}",t.publisherName),e=i.replaceAll(e,"{{doc_id}}",t.docId),e=i.replaceAll(e,"{{time_stamp}}",Date.now().toString()),n&&n.campaignId&&(e=i.replaceAll(e,"{{campaign_id}}",n.campaignId.toString())),n&&n.marketerName&&(e=i.replaceAll(e,"{{adv_name}}",n.marketerName)),e}static replaceAll(e,t,i){return e.replace(new RegExp(t,"g"),i)}static getSiblingsBetweenRecs(e,t){const i=e.parentNode?.children,r=t.parentNode?.children;if(!i||!r)throw Error("invalid htmlElement");let n=Array.from(i).concat(e.parentNode!==t.parentNode?Array.from(r):[]),o=[],a=!1;for(let i of n){let r=i===e,n=i===t;if(a||r)if(r){if(n)break;a=!0}else if(a){if(n)break;o.push(i)}}return o}}t.Z=i},320:function(e,t,i){"use strict";i.d(t,{r:function(){return h}});var r,n=i(5148),o=i(8347),a=i(3058),s=i(2753),d=i(4528),l=i(5259),c=i(8178);!function(e){e.None="none",e.Regular="regular",e.Slider="slider",e.SliderAlwaysRight="sliderAlwaysRight",e.NoScroll="noScroll"}(r||(r={}));var u=i(5022),g=i(6022),p=i(9202);class h{static widgetProxy=window.OB_PROXY||{};static getWidgetRequest(e,t,i){return h.widgetProxy.getRequest&&h.widgetProxy.getRequest(e,t,i)}static getWidgetRawResponse(e){return h.widgetProxy.getRawResponse&&h.widgetProxy.getRawResponse(e)}static getAbTestVal(e,t,i){const r=h.widgetProxy.getFeedFatherAB;if(r.constructor===Function&&r(e)){const n=r(e);if(n&&n!==i){const r=this.getWidgetRequest(e,t,i).split("-")[1];return r?n+"-"+r:n}return n}return h.getWidgetRequest(e,t,i)}static getCardIdx(e){return h.widgetProxy&&h.widgetProxy.getCardIdx?h.widgetProxy.getCardIdx(e):null}static getWidgetSetting(e,t,i){return h.widgetProxy.getSet(e,t,i)}static getWidgetSettings(e){const t=h.getWidgetIndex(e),i=t?"outbrain_widget_"+t:"outbrain_widget_0",r=h.getWidgetElement(i),s=h.widgetProxy.getDataSrcFinalUrl?h.widgetProxy.getDataSrcFinalUrl(e):void 0;let d={widgetID:h.getWidgetId(e),reportedWidgetId:h.getReportedWidgetJSId(e,r),widgetIdx:t||0,isSmartFeed:h.isSmartFeed(r),isSmartFeedFather:h.isSmartFeedFather(r),pubID:h.getWidgetRequest(e,"pid",null),reqID:h.getWidgetRequest(e,"req_id",-1),pageViewId:h.getWidgetRequest(e,"pvId",""),containerID:i,docId:h.getWidgetRequest(e,"did",-1),sourceId:h.getWidgetRequest(e,"sid",null),lazyListingsPixel:h.getWidgetMeta(e,"lazyListingsPixel",null),datasrc:s||h.getDocUrl(r),parallelPlay:h.getWidgetSetting(e,"vidgetParallelPlay",a.b.AvoidInViewport),viewabiltyEventTime:h.getWidgetSetting(e,"vidgetViewabilityMinDuration",2),viewabilityPercentageThreshold:h.getWidgetSetting(e,"vidgetViewabilityPercentageThreshold",50),playerMaxWidth:this.getPlayerMaxWidth(h.getWidgetSetting(e,"vidgetPlayerMaximalWidth",null)),playerOrientation:o.o.Horizontal,screenOrientation:this.getScreenOrientation(),playOnlyOnWifi:h.getWidgetSetting(e,"vidgetPlayOnlyOnWifi",!0),reportedSubWidgetId:h.getReportedSubWidgetId(e,r),ccpaPrivacy:h.getWidgetRequest(e,"ccpa",void 0),abTestVal:h.getAbTestVal(e,"abTestVal","no_abtest")||"void",obRecsAbtestAndVars:h.getWidgetRequest(e,"obRecsAbtestAndVars",void 0),isIframe:n.Z.isIframe(),recsNumber:h.getWidgetRequest(e,"tcr",0),fAB:h.widgetProxy.getFeedFatherAB(e)?h.widgetProxy.getFeedFatherAB(e):"no_abtest",layeredTestInfo:h.getWidgetRequest(e,"layeredTestInfo",void 0),fid:h.getFeedFatherId(e,r),fIndex:h.getFeedFatherIndex(e,r),feedIdx:h.widgetProxy.getRequest(e,"feedIdx"),cardIdx:h.getCardIdx(e),stickyPlayer:h.getStickyPlayerType(e),brandingType:h.getWidgetSetting(e,"whatIsBrandingType","Amelia + copy"),isTopBranding:h.isTopBranding(r),titleHeight:21,adBlockStatus:"true"===h.widgetProxy.getAdBlockerStatus(),feedVersion:h.widgetProxy.getRequest(e,"feedVersion"),rtlWidget:this.isRTLWidget(r),onlyVideoWidget:0===h.getWidgetRequest(e,"tcr",0)||/odb_dynamic_video-reel/gi.test(h.getWidgetSetting(e,"recMode","")),odbVidTag:h.getWidgetRequest(e,"odb_vid_tag",void 0),externalId:h.getObExtId(e,"getExtId"),externalId2:h.getObExtId(e,"getExtId2"),featureFlag:h.getWidgetSetting(e,"vidgetFeatureFlag","GA"),vidgetOrientation:h.getWidgetSetting(e,"vidgetOrientation",o.o.Horizontal),nativeVideoMode:h.getWidgetSetting(e,"vidgetNativeVideo","never"),nativeVideoBtnPosition:h.getWidgetSetting(e,"nativeVideoBtnPosition","belowVideo"),nativeVideoLogoPosition:h.getWidgetSetting(e,"nativeVideoLogoPosition","belowVideo"),recMode:h.getWidgetSetting(e,"recMode",""),isVideoReel:/odb_dynamic_video-reel/gi.test(h.getWidgetSetting(e,"recMode","")),vidgetContentSource:h.getWidgetSetting(e,"VidgetContentSource","none"),reelsTransitionDuration:h.getWidgetSetting(e,"reelsTransitionDuration",20),maxOrganicRecs:h.getWidgetSetting(e,"maxOrganicVideos",5),isProviderControlledPauseOutOfView:!1,vidgetN2vBackfill:h.getWidgetSetting(e,"vidgetN2vBackfill",g.t.None),adLoaded:!1,displayAdMaxSize:h.getWidgetSetting(e,"displayAdSize",""),vidgetWaterfallOptimization:h.getWidgetSetting(e,"vidgetWaterfallOptimization",0),logLevel:h.getLogLevel(e),vidgetPassBack:h.getWidgetSetting(e,"vidgetPassBack",null),vidgetPassbackTrigger:h.getWidgetSetting(e,"vidgetPassbackTrigger","none"),vidgetTimeout:h.getVidgetTimeout(e),configuredReloadTime:1e3*parseInt(h.getWidgetSetting(e,"vidgetReloadTime",4)),configuredReloadCount:h.getWidgetSetting(e,"vidgetReloadCount",3),actualReloadCount:h.getWidgetSetting(e,"vidgetReloadCount",3),vidgetCustomControls:this.isValidJson(h.getWidgetSetting(e,"vidgetCustomControls","")),vidgetNativeEndCard:h.getWidgetSetting(e,"VidgetNativeEndCard",!0),vidgetDeliveryMode:h.getWidgetSetting(e,"vidgetDeliveryMode","progressive"),playerLocation:h.getPlayerLocation(e),vidgetFootprint:h.getWidgetSetting(e,"vidgetFootprint","standard"),vidgetExternalMeasure:h.getWidgetSetting(e,"VidgetExternalMeasure",!1),firstAucationExceuted:!1,vidgetDynamicReloads:h.getWidgetSetting(e,"vidgetDynamicReloads",0),country:h.getWidgetRequest(e,"country",null),widgetPlatform:h.getWidgetRequest(e,"readerPlatform",null),publisherName:h.getWidgetRequest(e,"pubName",void 0),forceVI:h.getWidgetSetting(e,"forceVI",!1),bidFloor:h.getBidFloor(e),vidgetHLRExternalProviders:this.isValidJson(h.getWidgetSetting(e,"VidgetHLRExternalProviders",{})),providersChannelIds:this.getFallbackChannelId(e),contentCategory:h.getWidgetSetting(e,"vidgetContentCategory",null),language:h.getWidgetRequest(e,"lang",null),externalPublisherGroupId:h.getWidgetRequest(e,"expgid",null),lsd:h.getWidgetRequest(e,"lsd",""),t:h.getWidgetRequest(e,"t",""),permalinkFieldName:h.getPermalinkFieldName(e),installationKeyParam:h.getInstallationKeyParam(e),vidStatus:h.getWidgetRequest(e,"vid",p.S.outstream),consentData:h.getConsentData(e),sellerJsonChain:{ver:"1.0",complete:1,nodes:[{asi:"outbrain.com",sid:h.getWidgetRequest(e,"schain","0000000000000000000000000000000000"),hp:1}]},dfpInfo:{isDfp:!1,dfpFrame:null,dfpOriginalHeight:null},playedReloadIndexes:[],optimizeLogicExcludeCount:{providers:h.getProvidersDefaultCounts(),waterfallExcludeList:[],numberOfStrikes:2},brandingTag:"",isSyndicationAllowed:!1,providers:h.getProvidersData(e),isReelWidget:h.isReelWidget(e),closeButton:!h.isReelWidget(e),vidgetExternalImpressionPixels:this.getExternalImpressionPixels(e)};if(d.isSyndicationAllowed=d.isVideoReel&&"syndication"===d.vidgetContentSource.toLowerCase(),"None"!==d.brandingType)if(this.isFeedBranding(e,r,d)||d.onlyVideoWidget)d.brandingTag='<div class="ob_what" style="text-align: right; direction: ltr; clear: both; ">\n\t\t<a href="https://www.outbrain.com/what-is/default/en" rel="nofollow" onclick="OBR.extern.callWhatIs(\'https://www.outbrain.com/what-is/default/en\',\'\',-1,-1,true ,null);return false" style="color: #999; font-size: 11px; font-family: arial; text-decoration: none;">Recommended by<span class="ob_logo" title="Outbrain - content marketing" style="background: url(https://widgets.outbrain.com/images/widgetIcons/ob_logo_67x12.png) no-repeat center top; width: 67px; height: 12px;vertical-align: baseline !important; display: inline-block; padding: 0 5px; box-sizing: content-box; -moz-box-sizing: content-box; -webkit-box-sizing: content-box;"></span></a></div>',this.addDefaultBrandingStyle(i+"_"+d.widgetID+"_",d.onlyVideoWidget,d.rtlWidget),this.addBrandingStyle(i+"_"+d.widgetID+"_",d.rtlWidget,d.isTopBranding);else{const e=n.Z.getSubtree(r).querySelector(".ob_what");e&&(d.brandingTag=n.Z.nodeToString(e),this.addBrandingStyle(i+"_"+d.widgetID+"_",d.rtlWidget,d.isTopBranding))}return d}static getVidgetTimeout(e){const t=h.getWidgetSetting(e,"vidgetTimeout",null);return t?1e3*t:null}static getBidFloor(e){return+h.getWidgetSetting(e,"vidgetOPABidFloor","")||null}static getLogLevel(e){const t=h.getWidgetSetting(e,"vidgetLogLevel","INFO").toUpperCase();return l.i[t]}static addBrandingStyle(e,t,i){let r=document.createElement("style");r.innerHTML="#"+e+"videoBranding .ob_what{background:none !important; padding: 0 5px;}",r.innerHTML+=t?`#${e}videoBranding{float:left;}`:`#${e}videoBranding{float:right;}`,i?r.innerHTML+="#"+e+"videoBranding .ob_what{ padding-bottom: 5px; top: 5px; display: block;position: absolute; right: 2px;}":(r.innerHTML+="#"+e+"videoBranding .ob_what{ padding-top: 5px;}",n.Z.isMobile()&&(r.innerHTML+="#"+e+"videoBranding .ob_what{top: auto;}")),document.body.appendChild(r)}static addDefaultBrandingStyle(e,t,i){let r=document.createElement("style");const n=`${e}videoBranding`;r.innerHTML=`#${n} .ob_logo:hover {background-position: center bottom !important;}`,i?(r.innerHTML+=t?"#"+e+"titleSrcWrapper{max-width:calc(100% - 190px); float: right;}":"",r.innerHTML+=`#${n} .ob_what a:before {content: ""; vertical-align: baseline; background-image: url(https://widgets.outbrain.com/images/widgetIcons/achoice.svg); background-size: 75% 75%; width: 12px; height: 12px; padding-right: 4px; margin-right:4px; display: inline-block; background-repeat: no-repeat; background-position: left center; border-right: 1px solid #999;}`):(r.innerHTML+=`#${n} .ob_what a:after {vertical-align: baseline; content:""; background-image: url(https://widgets.outbrain.com/images/widgetIcons/achoice.svg); background-size: 75% 75%; width: 12px; height: 12px; padding-left: 4px; display: inline-block; background-repeat: no-repeat; background-position: right center; border-left: 1px solid #999; }`,r.innerHTML+=t?"#"+e+"titleSrcWrapper{max-width:calc(100% - 190px); float: left;}":""),document.body.appendChild(r)}static getProvidersDefaultCounts(){const e={};return Object.keys(d.ZP.providers).forEach((t=>e[t]=0)),e}static getPlayerLocation(e){switch(h.getWidgetSetting(e,"recMode","")){case"odb_dynamic_reel":return s.h.InWidget;case"odb_dynamic_video-reel":return s.h.AboveWidget;default:const t=h.isInTopOfFeedTest(e)&&h.isTopOfFeedVariant(e),i=h.getWidgetSetting(e,"placementType","footer");if(t&&"in-article"!==i)return s.h.AboveWidget;const r=h.getQueryString("obLocation"),n=h.getWidgetSetting(e,"vidgetPlayerLocation",s.h.InWidget);return r||n}}static getObExtId(e,t){if(h.widgetProxy&&h.widgetProxy[t])try{return h.widgetProxy[t](e)}catch(e){throw"*** Get OB_ExtId from widget proxy failed for "+t+"***"}}static isRTLWidget(e){let t=n.Z.getSubtree(e).querySelector(".ob-widget-items-container");return!!t&&"rtl"===window.getComputedStyle(t).getPropertyValue("direction")}static isReelWidget(e){return/odb_dynamic_reel/gi.test(h.getWidgetSetting(e,"recMode",""))}static isTopBranding(e){let t=n.Z.getSubtree(e).querySelector(".ob_what");if(t&&!n.Z.isMobile()){let e=document?.defaultView?.getComputedStyle(t);if(e&&["absolute","static"].includes(e.getPropertyValue("position"))&&!["auto",null].includes(e.getPropertyValue("top")))return!0}return!1}static isFeedBranding(e,t,i){try{let r=t=n.Z.getSubtree(t);if(i.isSmartFeed?r=h.getWidgetElement("outbrain_widget_"+this.getFeedFatherIndex(e,t)):i.isSmartFeedFather&&(r=t),r){let e=r.querySelector(".ob_what");if(e&&(e.querySelector(".ob_feed_logo")||e.querySelector(".ob_sfeed_logo")))return!0}return!1}catch(e){throw"EXIT"}}static getWidgetElement(e){return document.getElementById(e)}static getDocUrl(e){const t=e.getAttribute("data-src");if(t&&t.includes("http"))return t;{const t=e.getAttribute("data-ob-contentUrl");if(t)return t;const i=e.getAttribute("data-ob-bundleUrl");if(i)return i;const r=e.getAttribute("data-ob-portalUrl");if(r)return r}return window.location.href}static getProvidersData(e){let t=h.getQueryString("playMode"),i=[];const r=h.getWidgetSetting(e,"vidgetProvidersWaterfall",this.getDefaultProvidersWaterfallAsString());let n=h.getWidgetSetting(e,"vidgetPlayMode",void 0);try{n=JSON.parse(n)}catch(e){n=null}return n&&!Array.isArray(n)&&(t=t||n.globalPlayMode||null,n=null),r&&(i=r.split(",").map((e=>{e=e.trim();const i=n?.find((t=>t.name===e));return{name:e,playMode:t||i?.playMode||c.d.providers?.find((t=>t.name===e))?.playMode,currentPlayMode:c.d.providers?.find((t=>t.name===e))?.currentPlayMode,pauseOutOfView:i?.pauseOutOfView||c.d.providers?.find((t=>t.name===e))?.pauseOutOfView,playWaitingTime:i?.playWaitingTime||c.d.providers?.find((t=>t.name===e))?.playWaitingTime}})),i&&i.length)?i:c.d.providers?.filter((e=>e.defaultProvider))}static getDefaultProvidersWaterfallAsString(){const e=c.d.providers?.filter((e=>e.defaultProvider));return e.map((e=>e.name)).join(",")}static isInTopOfFeedTest(e){const t=!!h.widgetProxy.getFeedParentWidget(e),i="2"===h.widgetProxy.getRequest(e,"feedVersion");return!(!t||!i)}static isTopOfFeedVariant(e){const t=h.getWidgetRequest(e,"obRecsAbtestAndVars","");return t&&(t.indexOf("888-3171")>-1||t.indexOf("888-3231")>-1)}static getStickyPlayerType(e){switch(h.getQueryString("obSticky")||h.getWidgetSetting(e,"vidgetActivateStickyPlayer","none").toString()){case r.None:default:return null;case r.Regular:return u.t.Lazy;case r.Slider:return u.t.Eager;case r.SliderAlwaysRight:return u.t.Override;case r.NoScroll:return u.t.NoScroll}}static getPlayerMaxWidth(e){const t={horizontal:null,vertical:null},i=h.isValidJson(e);return i&&isNaN(Number(e))?(isNaN(Number(i.horizontal))||0==i.horizontal||(t.horizontal=i.horizontal),isNaN(Number(i.vertical))||0==i.vertical||(t.vertical=i.vertical)):t.horizontal=isNaN(Number(e))||0==e?null:e,t}static getScreenOrientation(){return window.matchMedia("(orientation: portrait)").matches?o.o.Vertical:o.o.Horizontal}static isValidJson(e){try{return JSON.parse(e)}catch(e){return}}static getQueryString(e){let t=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(window.location.href);return t?t[1]:null}static getWidgetId(e){return h.getWidgetRequest(e,"widgetJsId",h.widgetProxy.getWidgetId(e))}static getWidgetIndex(e){if(h.widgetProxy.getWidgetIndex)return h.widgetProxy.getWidgetIndex(e)}static getReportedWidgetJSId(e,t){let i=h.getWidgetId(e);if(h.isSmartFeed(t)){const t=h.widgetProxy.getFeedParentWidget?h.widgetProxy.getFeedParentWidget(e):e;i=h.getWidgetId(t)}return i}static getFeedFatherId(e,t){if(h.isSmartFeed(t)){const t=h.widgetProxy.getFeedParentWidget?h.widgetProxy.getFeedParentWidget(e):e;return h.getWidgetRequest(t,"wnid",null)}return null}static getFeedFatherIndex(e,t){if(h.isSmartFeed(t)){const t=h.widgetProxy.getFeedParentWidget?h.widgetProxy.getFeedParentWidget(e):e;return h.getWidgetIndex(t)}return null}static isSmartFeed(e){return!(!e||!e.getAttribute("data-feed-idx")&&!e.getAttribute("data-card-idx"))}static isSmartFeedFather(e){return!!n.Z.getSubtree(e).querySelector(".ob-widget[class*='ob-smartfeed']")||!!n.Z.getSubtree(e).querySelector(".ob-widget[class*='ob-feed-layout']")}static getReportedSubWidgetId(e,t){let i=h.getWidgetId(e);return h.isSmartFeed(t)?i:null}static getWidgetMeta(e,t,i){if(h.widgetProxy&&"function"==typeof h.widgetProxy.getMeta)try{return h.widgetProxy.getMeta(e,t,i)}catch(e){throw"*** Get widget meta from widget proxy failed ***"}return null}static getExternalImpressionPixels(e){const t=h.getWidgetSetting(e,"vidgetExternalImpressionPixels",void 0);return t?t.split(",").map((e=>e.trim())):void 0}static getFallbackChannelId(e){const t={};return t.Aniview=h.getWidgetRequest(e,"fallbackChannelIdAniview",null),t}static getPermalinkFieldName(e){return h.widgetProxy.getPermalinkFieldName&&h.widgetProxy.getPermalinkFieldName(e)||"permalink"}static getInstallationKeyParam(e){return h.widgetProxy.getInstallationKey&&h.widgetProxy.getInstallationKey(e)}static getConsentData(e){const t=h.getWidgetRequest(e,"cnsntv2",null);return t||h.getWidgetRequest(e,"cnsnt","")}}},655:function(e,t,i){"use strict";i.d(t,{CR:function(){return d},FC:function(){return u},Jh:function(){return a},KL:function(){return g},XA:function(){return s},ZT:function(){return n},ev:function(){return l},mG:function(){return o},qq:function(){return c}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function o(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{d(r.next(e))}catch(e){o(e)}}function s(e){try{d(r.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}d((r=r.apply(e,t||[])).next())}))}function a(e,t){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(d){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,d])}}}Object.create;function s(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function l(e,t,i){if(i||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}function c(e){return this instanceof c?(this.v=e,this):new c(e)}function u(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||s(e,t)}))})}function s(e,t){try{(i=n[e](t)).value instanceof c?Promise.resolve(i.value.v).then(d,l):u(o[0][2],i)}catch(e){u(o[0][3],e)}var i}function d(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=s(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){(function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)})(r,n,(t=e[i](t)).done,t.value)}))}}}Object.create},5434:function(e,t,i){var r={"./aniview":[1668,668],"./aniview/":[1668,668],"./aniview/aniview-player-settings.handler":[5372,372],"./aniview/aniview-player-settings.handler.ts":[5372,372],"./aniview/aniview.controller":[5565,565],"./aniview/aniview.controller.ts":[5565,565],"./aniview/config/aniview-player-events.enum":[1665,665],"./aniview/config/aniview-player-events.enum.ts":[1665,665],"./aniview/config/aniview.config":[7701,701],"./aniview/config/aniview.config.ts":[7701,701],"./aniview/index":[1668,668],"./aniview/index.ts":[1668,668],"./aniview/interfaces/aniview-audit-params.interface":[4080,80],"./aniview/interfaces/aniview-audit-params.interface.ts":[4080,80],"./base/base.controller":[3402,402],"./base/base.controller.ts":[3402,402],"./n2v":[5180,688,180],"./n2v/":[5180,688,180],"./n2v/config/n2v.config":[7234,234],"./n2v/config/n2v.config.ts":[7234,234],"./n2v/index":[5180,688,180],"./n2v/index.ts":[5180,688,180],"./n2v/n2v.controller":[809,688,809],"./n2v/n2v.controller.ts":[809,688,809],"./opa":[2822,688,822],"./opa/":[2822,688,822],"./opa/config/opa-player-events.enum":[6527,527],"./opa/config/opa-player-events.enum.ts":[6527,527],"./opa/config/opa.config":[5512,512],"./opa/config/opa.config.ts":[5512,512],"./opa/enums/pixel-event-type.enum":[8312,312],"./opa/enums/pixel-event-type.enum.ts":[8312,312],"./opa/enums/tracker-method.enum":[3588,588],"./opa/enums/tracker-method.enum.ts":[3588,588],"./opa/index":[2822,688,822],"./opa/index.ts":[2822,688,822],"./opa/interfaces/opa-audit-params.interface":[9926,926],"./opa/interfaces/opa-audit-params.interface.ts":[9926,926],"./opa/interfaces/opa-player-config.interface":[9829,829],"./opa/interfaces/opa-player-config.interface.ts":[9829,829],"./opa/interfaces/trackers.interface":[7768,768],"./opa/interfaces/trackers.interface.ts":[7768,768],"./opa/opa-player-settings.handler":[5837,837],"./opa/opa-player-settings.handler.ts":[5837,837],"./opa/opa.controller":[688,688],"./opa/opa.controller.ts":[688,688],"./vi":[182,182],"./vi/":[182,182],"./vi/config/vi-forced-settings.const":[7917],"./vi/config/vi-forced-settings.const.ts":[7917],"./vi/config/vi.config":[8132,132],"./vi/config/vi.config.ts":[8132,132],"./vi/enums/vi-partner-ids.enum":[4031,31],"./vi/enums/vi-partner-ids.enum.ts":[4031,31],"./vi/enums/vi-player-events.enum":[6308,308],"./vi/enums/vi-player-events.enum.ts":[6308,308],"./vi/enums/vi-traffic-type.enum":[7197,197],"./vi/enums/vi-traffic-type.enum.ts":[7197,197],"./vi/index":[182,182],"./vi/index.ts":[182,182],"./vi/interfaces/vi-audit-params.interface":[2721,721],"./vi/interfaces/vi-audit-params.interface.ts":[2721,721],"./vi/interfaces/vi-paid-play-params.interface":[8356,356],"./vi/interfaces/vi-paid-play-params.interface.ts":[8356,356],"./vi/interfaces/vi-player-config.interface":[3209,209],"./vi/interfaces/vi-player-config.interface.ts":[3209,209],"./vi/vi-player-settings.handler":[8960,960],"./vi/vi-player-settings.handler.ts":[8960,960],"./vi/vi.controller":[1724,724],"./vi/vi.controller.ts":[1724,724],"./vidazoo":[8334,334],"./vidazoo/":[8334,334],"./vidazoo/config/vidazoo-player-events.enum":[2586,586],"./vidazoo/config/vidazoo-player-events.enum.ts":[2586,586],"./vidazoo/config/vidazoo.config":[4727,727],"./vidazoo/config/vidazoo.config.ts":[4727,727],"./vidazoo/index":[8334,334],"./vidazoo/index.ts":[8334,334],"./vidazoo/interfaces/vidazoo-audit-params.interface":[8147,147],"./vidazoo/interfaces/vidazoo-audit-params.interface.ts":[8147,147],"./vidazoo/vidazoo-player-settings.handler":[1848,848],"./vidazoo/vidazoo-player-settings.handler.ts":[1848,848],"./vidazoo/vidazoo.controller":[417,417],"./vidazoo/vidazoo.controller.ts":[417,417]};function n(e){if(!i.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return Promise.all(t.slice(1).map(i.e)).then((function(){return i(n)}))}n.keys=function(){return Object.keys(r)},n.id=5434,e.exports=n}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={id:e,exports:{}};return i[e](o,o.exports,n),o.exports}n.m=i,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+".obVideo.js"},n.miniCssF=function(e){},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="vidget:",n.l=function(i,r,o,a){if(e[i])e[i].push(r);else{var s,d;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+o){s=u;break}}s||(d=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=i),e[i]=[r];var g=function(t,r){s.onerror=s.onload=null,clearTimeout(p);var n=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=g.bind(null,s.onerror),s.onload=g.bind(null,s.onload),d&&document.head.appendChild(s)}},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={179:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise((function(i,n){r=e[t]=[i,n]}));i.push(r[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=function(t,i){var r,o,a=i[0],s=i[1],d=i[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(d)d(n)}for(t&&t(i);l<a.length;l++)o=a[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkvidget=self.webpackChunkvidget||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.nc=void 0,function(){"use strict";var e,t=n(5148);!function(e){e[e.Initialized=0]="Initialized",e[e.ReadyToPlay=1]="ReadyToPlay",e[e.Playing=2]="Playing",e[e.NotPlaying=3]="NotPlaying",e[e.Finished=4]="Finished",e[e.Failure=5]="Failure"}(e||(e={}));var i=n(3058);class r{static shouldHoldVidgetByParallelPlayPolicy(e,t){switch(e.getPlayMode()){case i.b.Avoid:return this.getVideoTagsPlayingOnPage().length>0;case i.b.AvoidInViewport:return e.isInView()&&r.isVideoPlayingInViewport();case i.b.AllowInstream:return r.isOutstreamVideoPlayingInViewport(t);case i.b.Allow:default:return!1}}static shouldDisposeVidget(e,t){const r=Array.from(document.getElementsByTagName("video")),n=t?Array.from(t.getElementsByTagName("video")):[];let o=!1;for(let e=0;e<r.length;e++)if(!r[e].isSameNode(n[e])){o=!0;break}return i.b.Strict===e&&o}static getVideoTagsPlayingOnPage(){const e=document.getElementsByTagName("video");return Array.from(e).filter((e=>e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2))}static isVideoPlayingInViewport(){const e=r.getVideoTagsPlayingOnPage();if(0===e.length)return!1;return e.filter((e=>t.Z.viewPercentage(e)>0)).length>0}static isOutstreamVideoPlayingInViewport(t){const i=r.getVideoTagsPlayingOnPage();if(0===i.length)return!1;const n=t.filter((t=>t.isInstream()&&t.statusChange$.value===e.Playing));return i.length!==n.length}}var o,a=n(6515),s=n(3736),d=n(4452),l=n(4528),c=n(320),u=n(5022);!function(e){e.TopRight="top-right",e.TopLeft="top-left",e.BottomRight="bottom-right",e.BottomLeft="bottom-left"}(o||(o={}));class g{static getVidgetData(e,i){let r={},n=g.prepareObjectData(e,"vidgetData"),o=g.prepareObjectData(e,"vidgetInstreamData");r.isTopOfFeedTestWithTOFVariants=c.r.isInTopOfFeedTest(e)&&c.r.isTopOfFeedVariant(e),r.isReelWidget=c.r.isReelWidget(e);let a=c.r.getWidgetSetting(e,"vidgetIndexes",null);if(a=/^([0-9]+(,[0-9]+)*)?$/.test(a)&&!r.isReelWidget?a:"1","0"===a){const e=c.r.getWidgetElement(i);a=`0,${t.Z.getSubtree(e).querySelectorAll("[class*='ob-recIdx-']").length}`,r.coveredWidget=!0}let s=c.r.getWidgetSetting(e,"vidgetAdUnitType",null),d=0,l=0;const u=Array.from(new Set(a.split(",")));return u.length>=2&&u.sort(),a&&a.length&&(d=u.length&&parseInt(u[0])>0?parseInt(u[0])-1:0,l=u.length?parseInt(u[u.length-1])-1:0),r.firstIndex=d,r.lastIndex=l,r.indexes=u.length>1?Array.from({length:l-d+1},((e,t)=>t+d+1+"")):u,r.pubDomain=document.location.hostname||document.location.href,r.ctaText=n.ctaText||"",r.instream=s&&"instream"===s,r.unMuteOnMouseEnter=void 0!==n.unMuteOnMouseEnter&&n.unMuteOnMouseEnter,r.closeButton=void 0===n.closeButton||n.closeButton,r.initialDelay=g.setInitialDelay(n,e),r.consoleLog=void 0!==n.consoleLog&&n.consoleLog,r.sliderPercentBottom=g.getSliderPercentBottom(n.sliderPercentBottom),r.providerPlayerReuse=void 0!==n.providerPlayerReuse&&n.providerPlayerReuse,r.sticky=g.getStickyPlayerSettings(n),r.avoidSliderWhenSmall=n.avoidSliderWhenSmall||-1/0,r.placementType=g.getPlacementType(n.stickyPlayer,c.r.getWidgetSetting(e,"placementType","footer")),r.specificAdvName=void 0!==n.specificAdvName?n.specificAdvName:void 0,r.ghostFixedSize=void 0!==n.ghostFixedSize&&n.ghostFixedSize,r.fillEvent=void 0!==n.fillEvent&&n.fillEvent,r.storeVast=void 0!==n.storeVast&&n.storeVast,r.vidgetContentSourceDemo=void 0!==n.vidgetContentSourceDemo&&n.vidgetContentSourceDemo,r.source=void 0!==n.source?n.source:void 0,r.title=void 0!==n.title?n.title:void 0,r.retries=void 0!==n.retries?n.retries:void 0,r.timeout=void 0!==n.timeout?n.timeout:void 0,r.contentProvider=void 0!==n.contentProvider?n.contentProvider:void 0,r.publisherId=n.publisherId||"58a5addb28a0612d3529bc5e",r.isTopOfFeedTestWithConfigTestVariant=r.isTopOfFeedTestWithTOFVariants&&g.isTopOfFeedConfigChange(e),r.errorLimit=r.isTopOfFeedTestWithTOFVariants?10:n.errorLimit||null,r.vastRetries=r.isTopOfFeedTestWithTOFVariants?1:n.vastRetries||null,r.midrollTime=r.isTopOfFeedTestWithTOFVariants?r.isTopOfFeedTestWithConfigTestVariant?3:4:n.midrollTime||null,r.maxRun=r.isTopOfFeedTestWithTOFVariants?r.isTopOfFeedTestWithConfigTestVariant?14:12:n.maxRun||null,r.abrexVariant=g.getAbrexVariantToReport(e),r.channelId=c.r.getQueryString("obChannelId")||n.channelId,r.playerId=n.playerId||"612b515fa94087000435798d",r.isReelWidget&&!n.playerId&&(r.playerId="62f270697d1306931b89c622"),r.userId=n.userId||"5a9ea5a0225f7d0004c70045",r.viPubId=o.viPubId||n.viPubId,r.viChannelId=o.viChannelId||n.viChannelId,g.isInAppWidget(e)?g.setInAppWidgetConfig(r,n,e):r.inApp=!1,r.env=window.location.search.includes("vidgetEnv=test")?"TEST":"PROD",r.NativeVideoMaxStreamingDuration=void 0!==n.NativeVideoMaxStreamingDuration?parseInt(n.NativeVideoMaxStreamingDuration):30,r.opaDemoBidder=void 0!==n.opaDemoBidder?n.opaDemoBidder:void 0,r.workerBypass="boolean"==typeof n.workerBypass&&n.workerBypass,r.sliderBelowParent=n.sliderBelowParent||!1,r.gdprInt=this.getGdprOrLegit(e,n),r.header=void 0!==n.header?n.header:void 0,r.endCardDuration=void 0!==n.endCardDuration?n.endCardDuration:void 0,r}static prepareObjectData(e,t){let i;try{i=JSON.parse(c.r.getWidgetSetting(e,t,"{}"))}catch(e){i={}}return i}static setInitialDelay(e,t){const i=c.r.getStickyPlayerType(t);return null!==i&&i!==u.t.Lazy?2e3:void 0!==e.initialDelay?1e3*parseInt(e.initialDelay):5e3}static getSliderPercentBottom(e){return void 0!==e?`${Math.max(0,(e-17)%100)}%`:"2px"}static getStickyPlayerSettings(e){return{sliderPosition:g.getSliderPosition(e.sliderPosition),sliderEntry:e.sliderEntry||"side",width:g.getStickyWidth(e.sliderWidthPercent,400),get height(){return Math.ceil(this.width/this.ratio)},ratio:16/9,widthDefault:400,sliderPercentBottom:e.sliderPercentBottom}}static getSliderPosition(e){switch(e){case"left":return o.BottomLeft;case"top-right":return o.TopRight;case"top-left":return o.TopLeft;default:return o.BottomRight}}static getStickyWidth(e,t){return e?Math.min(Math.max(e,50),250)*(t/100):t}static getPlacementType(e,t){return"slider"===e||"sliderAlwaysRight"===e?"slider":/in-article|sidebar|in-feed|header/gi.test(t)?t:"footer"}static isTopOfFeedConfigChange(e){const t=c.r.getWidgetRequest(e,"obRecsAbtestAndVars","");return t&&t.indexOf("888-3231")>-1}static getAbrexVariantToReport(e){const t=c.r.getWidgetRequest(e,"obRecsAbtestAndVars",null),i=c.r.isInTopOfFeedTest(e);if(t&&i){const e="888-",i=t.split(",").filter((t=>t.indexOf(e)>-1));if(i&&i[0])return i[0]}return null}static isInAppWidget(e){const t="mobile-app-js-widget"===c.r.getWidgetSetting(e,"InstallationType","web-js-widget");let i=!1;const r=g.getWidgetExtraParams(e);return r&&r.indexOf("inApp=true")>-1&&(i=!0),t||i}static setInAppWidgetConfig(e,t,i){e.inApp=!0;const r=g.getWidgetExetrnalParamMap(i);if(e.inAppBridge=r&&"true"===r.inApp,e.appName=t.appName||r.appName||c.r.getWidgetRequest(i,"app_name",void 0),e.appCategory=t.appCategory||void 0,e.packageName=t.packageName||r.appBundle||c.r.getWidgetRequest(i,"app_id",void 0),e.bundleId=t.bundleId||r.appBundle||c.r.getWidgetRequest(i,"app_id",void 0),e.appStoreUrl=t.appStoreUrl||void 0,e.playStoreUrl=t.playStoreUrl||void 0,e.mobileUserId=g.getApiUserId(i),r.platform)e.platform=r.platform.toLowerCase();else{let t=navigator.userAgent;t.includes("iPhone")||t.includes("iPad")?e.platform="ios":t.includes("Android")&&(e.platform="android")}}static getGdprOrLegit(e,t){let i=c.r.getWidgetRequest(e,"gdpr",0);return 1==i&&"void"!=c.r.getWidgetRequest(e,"cnsnt","void")?1:"undefined"!==t.gdpr&&"legitimate"==t.gdpr?2:i}static getWidgetExetrnalParamMap(e){const t=g.getWidgetExtraParams(e),i={};return t&&t.split("&").reduce(((e,t)=>{const i=t.split("=");return e[i[0]]=i[1]?decodeURIComponent(i[1]):"",e}),i),i}static getWidgetExtraParams(e){if(c.r.widgetProxy&&"function"==typeof c.r.widgetProxy.getExtraParams)try{return c.r.widgetProxy.getExtraParams(e)}catch(e){throw"*** Get Widget extra params from widget proxy failed ***"}return null}static getApiUserId(e){if(c.r.widgetProxy&&"function"==typeof c.r.widgetProxy.getUserId)try{return c.r.widgetProxy.getUserId(e)}catch(e){throw"*** Get Api user id from widget proxy failed ***"}return null}}var p=class{static get(e,t,i){let r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?void 0!==t&&t(r.responseText):void 0!==i&&i("Request failed.  Returned status of "+r.status)},r.send()}static post(e,t,i,r){return new Promise(((n,o)=>{let a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){200===a.status?void 0!==i&&i(a.responseText):void 0!==r&&r("Request failed.  Returned status of "+a.status)},a.send(JSON.stringify(t)),a.onload=()=>{200===a.status?n(a.responseText):o("Request failed.  Returned status of "+a.status)},a.onerror=()=>{o("Request failed.  Returned status of "+a.status)}}))}},h=n(2753),v=n(2798),y=n(5259);const f={[s.t.Debug]:y.i.DEBUG,[s.t.Loaded]:y.i.DEBUG,[s.t.PixelFired]:y.i.DEBUG,[s.t.Pending]:y.i.DEBUG,[s.t.VidgetConfigError]:y.i.DEBUG,[s.t.ProviderPass]:y.i.DEBUG,[s.t.AdLoaded]:y.i.DEBUG,[s.t.Viewability]:y.i.INFO,[s.t.Play]:y.i.INFO,[s.t.Pause]:y.i.INFO,[s.t.Resume]:y.i.INFO,[s.t.Complete]:y.i.INFO,[s.t.Click]:y.i.INFO,[s.t.Mute]:y.i.INFO,[s.t.Unmute]:y.i.INFO,[s.t.Close]:y.i.INFO,[s.t.Error]:y.i.INFO,[s.t.FirstQuartile]:y.i.INFO,[s.t.SecondQuartile]:y.i.INFO,[s.t.ThirdQuartile]:y.i.INFO,[s.t.Skip]:y.i.INFO};class m{sessionId;widgetSettings;vidgetData;auditUrl;widgetReqId;version;staticParams;constructor(e,t,i){this.sessionId=e,this.widgetSettings=t,this.vidgetData=i,this.widgetReqId=t.reqID,this.auditUrl=m.getAuditUrl(i),this.version=window.OB_VIDEO_VERSION?window.OB_VIDEO_VERSION:null,this.staticParams=this.prepareStaticParams()}prepareStaticParams(){return{abTestList:this.widgetSettings.layeredTestInfo,abTestVal:this.widgetSettings.abTestVal,adBlocker:this.widgetSettings.adBlockStatus,cardIdx:this.widgetSettings.cardIdx,ccpaPrivacy:this.widgetSettings.ccpaPrivacy,configuredNative:this.widgetSettings.nativeVideoMode,configuredProvidersCount:this.widgetSettings.providers?this.widgetSettings.providers.length:1,configuredReloadCount:this.widgetSettings.configuredReloadCount||1,contentSource:this.widgetSettings.vidgetContentSource&&"none"!==this.widgetSettings.vidgetContentSource?this.widgetSettings.vidgetContentSource:null,docId:this.widgetSettings.docId,featureFlag:this.widgetSettings.featureFlag,feedVersion:this.widgetSettings.feedVersion,gdpr:this.vidgetData.gdprInt,iframe:this.widgetSettings.isIframe,obRecsAbtestAndVars:this.widgetSettings.obRecsAbtestAndVars,odbVidTag:this.widgetSettings.odbVidTag,placementType:this.vidgetData.placementType,playerLocation:m.getAuditPlayerLocation(this.widgetSettings),publisherId:this.widgetSettings.pubID?this.widgetSettings.pubID:"10683",screenResolution:[window.screen.availHeight,"x",window.screen.availWidth].join(""),sessionId:this.sessionId,sourceDocUrl:this.widgetSettings.datasrc||window.location.href,sourceId:this.widgetSettings.sourceId?this.widgetSettings.sourceId:"6852067",sourcePvId:this.widgetSettings.pageViewId,sourceRequestId:this.widgetReqId,sourceSubWidgetId:this.widgetSettings.reportedSubWidgetId,sourceWidgetId:this.widgetSettings.reportedWidgetId?this.widgetSettings.reportedWidgetId:"AR_1",sticky:this.widgetSettings.stickyPlayer?this.widgetSettings.stickyPlayer.toString():null,subPlatform:this.vidgetData.inApp?this.vidgetData.inApp?"app":"web":null,version:this.version?this.version:null,waterfall:this.widgetSettings.providers?this.widgetSettings.providers.map((e=>e.name)).toString():null,widgetIdx:this.widgetSettings.widgetIdx,externalId:this.widgetSettings.externalId,externalIdSecondary:this.widgetSettings.externalId2,supplyChain:this.widgetSettings.logLevel>=y.i.DEBUG?m.createSupplyChainString(this.widgetSettings):void 0}}send(e,t={},i=y.i.INFO){const r=f[e];if(this.widgetSettings.logLevel<i||null!=r&&this.widgetSettings.logLevel<r)return;const n=(new Date).toString();let o={eventType:e,...this.staticParams,...t,localTime:n};m.beautifyAuditParams(o),o=m.clearNullValues(o);const a=new URL(this.auditUrl);Object.entries(o).forEach((([e,t])=>{a.searchParams.append(e,t)})),p.get(a.href)}static createSupplyChainString(e){const t=e.sellerJsonChain;return`${t.ver},${t.complete}!${t.nodes[0].asi},${t.nodes[0].sid},${t.nodes[0].hp},,,`}static beautifyAuditParams(e){e.playMode=m.getAuditPlayMode(e.playMode),e.provider=e.provider?.toUpperCase(),e.activeProvider=e.activeProvider?.toUpperCase()}static clearNullValues(e){return Object.keys(e).filter((t=>null!=e[t])).reduce(((t,i)=>({...t,[i]:e[i]})),{})}static getAuditUrl(e){switch(e.env){case"SIM":case"TEST":return l.dj.Sim;default:return l.dj.Prod}}static getAuditPlayMode(e){switch(e){case v.Z.Load:return"AUTO_PLAY";case v.Z.View:return"VIEW_TO_PLAY";case v.Z.ViewPreload:return"VIEW_PRELOAD";default:return"UNKNOWN"}}static getAuditPlayerLocation(e){return e.playerLocation?e.isReelWidget?h.h.Midroll:e.playerLocation:null}}var w,b=m,P=n(4453);!function(e){e.Sideways="sideways",e.TopDown="top-down",e.BottomUp="bottom-up"}(w||(w={}));class S{widgetElement;sliderSettings;onSliderChangesCallback;static transitionDuration=300;static viewPortObserverSettings={threshold:.4,debounce:200};static sliderNoScrollTimeout=1e3+S.transitionDuration;static widgetPropsToCopyToPlaceholder=["marginTop","marginBottom","marginLeft","marginRight","paddingBottom","paddingTop","paddingLeft","paddingRight","height","width","top","left","position"];static widgetRestoredProperties=["top","left","position","transition"];placeholderElement;inViewSubscription;outOfViewSubscription;_isSliderActive=!1;originalWidgetProps={};sliderTrackingFunction=this.slideToPlace.bind(this);scrollEventListenerController;sliderChanges={isSliderHidden:!0,isSliderActive:!1,width:0,height:0};constructor(e,i,r){if(this.widgetElement=e,this.sliderSettings=i,this.onSliderChangesCallback=r,i.sliderMode!==u.t.Override)if(i.sliderMode!==u.t.NoScroll)if(t.Z.viewPercentage(this.widgetElement)>=100*S.viewPortObserverSettings.threshold)this.widgetInViewPort();else{let e=this.widgetElement;this.sliderSettings.sliderMode===u.t.Eager&&(this.switchToSliderMode(!0),e=this.placeholderElement),this.widgetOutOfViewPort(e)}else this.handleNoScrollBehavior();else this.switchToSliderMode(!0)}static convertToPx(e){return`${e}px`}static getSliderDimension(e){return"function"==typeof e?e():e}static calcMarginInPx(e,t){return t.endsWith("%")?parseFloat(t.slice(0,-1))/100*e:t.endsWith("px")?parseInt(t.slice(0,-2)):0}static getInnerDimensions(e){const t=getComputedStyle(e);let i=e.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom);return{elementWidth:e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),elementHeight:i}}get isSliderActive(){return this._isSliderActive}destroySlider(){return new Promise((e=>{this.inViewSubscription?.unsubscribe(),this.outOfViewSubscription?.unsubscribe(),window.removeEventListener("resize",this.sliderTrackingFunction),this.scrollEventListenerController?.abort(),this._isSliderActive?(this.handleEntry(),setTimeout((()=>{this.restoreOriginalWidgetProps(),this.placeholderElement?.remove(),e()}),S.transitionDuration)):e()}))}widgetOutOfViewPort(e){this.outOfViewSubscription=P.J.elementInViewChange(e,S.viewPortObserverSettings).subscribe((e=>{e===P.w.InView&&(this.outOfViewSubscription.unsubscribe(),this._isSliderActive&&this.switchToPlayerMode(),this.widgetInViewPort())}))}widgetInViewPort(){this.inViewSubscription=P.J.elementInViewChange(this.widgetElement,S.viewPortObserverSettings).subscribe((e=>{e===P.w.OutOfView&&(this.inViewSubscription.unsubscribe(),this._isSliderActive||this.switchToSliderMode(!1),this.widgetOutOfViewPort(this.placeholderElement))}))}trackToPosition(e,t){const i=new AbortController;t(),window.addEventListener("scroll",t,{signal:i.signal}),setTimeout((()=>{i.abort()}),e)}restoreOriginalWidgetProps(){const e=this.placeholderElement.getBoundingClientRect();this.widgetElement.style.top=S.convertToPx(e.y),this.widgetElement.style.left=S.convertToPx(e.x),this.sliderSettings.sliderClassname&&this.widgetElement.classList.remove(this.sliderSettings.sliderClassname);const{elementWidth:t,elementHeight:i}=S.getInnerDimensions(this.placeholderElement);this.widgetElement.style.width=t+"px",this.widgetElement.style.height=i+"px",S.widgetRestoredProperties.forEach((e=>{this.widgetElement.style[e]=this.originalWidgetProps[e]}))}switchToPlayerMode(){this.sliderSettings.sliderClassname&&this.widgetElement.classList.remove(this.sliderSettings.sliderClassname),this.trackToPosition(S.transitionDuration,(()=>{const e=this.placeholderElement.getBoundingClientRect();this.widgetElement.style.top=S.convertToPx(e.y),this.widgetElement.style.left=S.convertToPx(e.x)})),this._isSliderActive=!1,this.trackResize(!1);const{elementWidth:e,elementHeight:t}=S.getInnerDimensions(this.placeholderElement);this.widgetElement.style.width=e+"px",this.widgetElement.style.height=t+"px",this.notifySliderChange({isSliderActive:this.isSliderActive,height:t,width:e}),setTimeout((()=>{this.placeholderElement.remove(),S.widgetRestoredProperties.forEach((e=>{this.widgetElement.style[e]=this.originalWidgetProps[e]}))}),S.transitionDuration)}switchToSliderMode(e){this.createPlaceholderElement(),this.widgetElement.insertAdjacentElement("afterend",this.placeholderElement),this.sliderSettings.sliderClassname&&this.widgetElement.classList.add(this.sliderSettings.sliderClassname),this.showSlider(e),this.trackResize(!0)}showSlider(e){if(!e){const e=this.placeholderElement.getBoundingClientRect();this.widgetElement.style.top=S.convertToPx(e.y),this.widgetElement.style.left=S.convertToPx(e.x)}this.widgetElement.style.transition="none",this.widgetElement.style.position="fixed",this.startSliderTransition(e),this.notifySliderChange({isSliderActive:this.isSliderActive,isSliderHidden:!1,height:S.getSliderDimension(this.sliderSettings.sliderHeight),width:S.getSliderDimension(this.sliderSettings.sliderWidth)})}createPlaceholderElement(){this.placeholderElement=document.createElement("div"),this.sliderSettings.sliderMode!==u.t.Override&&this.sliderSettings.sliderMode!==u.t.NoScroll&&S.widgetPropsToCopyToPlaceholder.forEach((e=>{this.placeholderElement.style[e]=this.widgetElement.style[e]})),S.widgetRestoredProperties.forEach((e=>{this.originalWidgetProps[e]=this.widgetElement.style[e]})),this.sliderSettings.placeholderClassname&&this.placeholderElement.classList.add(this.sliderSettings.placeholderClassname)}startSliderTransition(e){e&&this.handleEntry(),this.slideToPlace()}handleEntry(){const{horizontalMargin:e,verticalMargin:t}=this.calcHorizontalVerticalMargin();w.Sideways===this.sliderSettings.sliderEntry?this.setSidewaysEntry(t):this.setVerticalEntry(e)}setSidewaysEntry(e){switch(this.sliderSettings.sliderPosition){case o.TopLeft:this.widgetElement.style.top=S.convertToPx(e),this.widgetElement.style.left=S.convertToPx(-S.getSliderDimension(this.sliderSettings.sliderWidth));break;case o.BottomLeft:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-e),this.widgetElement.style.left=S.convertToPx(-S.getSliderDimension(this.sliderSettings.sliderWidth));break;case o.TopRight:this.widgetElement.style.top=S.convertToPx(e),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth);break;case o.BottomRight:default:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-e),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth)}}setVerticalEntry(e){switch(w.BottomUp===this.sliderSettings.sliderEntry?this.widgetElement.style.top=S.convertToPx(window.innerHeight):w.TopDown===this.sliderSettings.sliderEntry&&(this.widgetElement.style.top=S.convertToPx(-S.getSliderDimension(this.sliderSettings.sliderHeight))),this.sliderSettings.sliderPosition){case o.TopLeft:case o.BottomLeft:this.widgetElement.style.left=S.convertToPx(e);break;case o.TopRight:case o.BottomRight:default:this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth-S.getSliderDimension(this.sliderSettings.sliderWidth)-e)}}slideToPlace(){const{horizontalMargin:e,verticalMargin:t}=this.calcHorizontalVerticalMargin();switch(this.widgetElement.style.transitionProperty="top, left, width, height",this.widgetElement.style.transitionDuration=`${S.transitionDuration}ms`,this.widgetElement.style.width=S.convertToPx(S.getSliderDimension(this.sliderSettings.sliderWidth)),this.widgetElement.style.height=S.convertToPx(S.getSliderDimension(S.getSliderDimension(this.sliderSettings.sliderHeight))),this._isSliderActive=!0,this.sliderSettings.sliderPosition){case o.TopLeft:this.widgetElement.style.top=S.convertToPx(t),this.widgetElement.style.left=S.convertToPx(e);break;case o.TopRight:this.widgetElement.style.top=S.convertToPx(t),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth-S.getSliderDimension(this.sliderSettings.sliderWidth)-e);break;case o.BottomLeft:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-t),this.widgetElement.style.left=S.convertToPx(e);break;case o.BottomRight:default:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-t),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth-S.getSliderDimension(this.sliderSettings.sliderWidth)-e)}}trackResize(e){e?window.addEventListener("resize",this.sliderTrackingFunction):window.removeEventListener("resize",this.sliderTrackingFunction)}notifySliderChange(e){if(this.onSliderChangesCallback){const t={...this.sliderChanges,...e};this.onSliderChangesCallback({prev:this.sliderChanges,next:t}),this.sliderChanges=t}}handleNoScrollBehavior(){this.switchToSliderMode(!0),this.scrollEventListenerController=new AbortController;let e,t=!0;window.addEventListener("scroll",(()=>{t&&(t=!1,this.hideSlider()),window.clearTimeout(e),e=setTimeout((()=>{t=!0,this.showSlider(!0)}),S.sliderNoScrollTimeout)}),{signal:this.scrollEventListenerController.signal})}hideSlider(){this.handleEntry(),this.notifySliderChange({isSliderHidden:!0})}calcHorizontalVerticalMargin(){return{horizontalMargin:this.sliderSettings.horizontalMargin?S.calcMarginInPx(window.document.documentElement.clientWidth,this.sliderSettings.horizontalMargin):0,verticalMargin:this.sliderSettings.verticalMargin?S.calcMarginInPx(window.innerHeight,this.sliderSettings.verticalMargin):0}}}class E{widgetElement;skipWrapper;constructor(e){this.widgetElement=e,this.createSkipButton()}createSkipButton(){this.skipWrapper=document.createElement("div"),this.skipWrapper.classList.add("obv-skip-wrapper"),this.skipWrapper.style.opacity="0.5";const e=document.createElement("span");this.minimizeSkipButtonSize(e),e.innerText="Skip Ad";const t=document.createElement("div");t.classList.add("obv-skip-icon"),t.innerHTML="&#x25B6;",this.skipWrapper.appendChild(e),this.skipWrapper.appendChild(t),this.widgetElement.appendChild(this.skipWrapper)}minimizeSkipButtonSize(e){this.widgetElement.getBoundingClientRect().height<350&&(this.skipWrapper.classList.add("minimize-skip-button"),e.classList.add("minimize-skip-button-text"))}reset(e){window.setTimeout((()=>{this.skipWrapper.style.opacity="1",this.skipWrapper.addEventListener("click",(()=>{E.notifySkipClick(e),this.resetStyle()}))}),2e3)}static notifySkipClick(e){e&&e()}resetStyle(){this.skipWrapper.style.opacity="0.5"}}class x{widgetSettings;vidgetData;playerWrapperElement;playerDimensions;playerIdsPrefix;_innerPlayerWrapper;footerWrapper;headerWrapper;videoWrapperViewportChanges$;videoWrapperViewportSubscription;containerId;widgetElement;widgetId;slider=null;skipAd=null;get innerPlayerWrapper(){return this._innerPlayerWrapper}constructor(e,t){this.widgetSettings=e,this.vidgetData=t,this.playerIdsPrefix=e.containerID+"_"+e.widgetID+"_",this.containerId=this.widgetSettings.containerID,this.widgetElement=c.r.getWidgetElement(this.containerId),this.widgetId=this.widgetSettings.widgetID}getAuditParams(){return{orientation:window.innerHeight>window.innerWidth?"PORTRAIT":"LANDSCAPE",viewability:this.getCurrentViewability()}}getCurrentViewability(){return t.Z.viewPercentage(this._innerPlayerWrapper)}create(){const e=t.Z.viewPercentage(this._innerPlayerWrapper)>50?P.w.InView:P.w.OutOfView;this.videoWrapperViewportChanges$=new a.X(e),this.playerWrapperElement=this.createPlayerWrapperElement(),this.createInnerPlayerWrapper(),this.playerWrapperElement&&(this.videoWrapperViewportSubscription=P.J.elementInViewChange(this._innerPlayerWrapper,{debounce:100,threshold:.5}).subscribe((e=>{e===P.w.InView?this.videoWrapperViewportChanges$.next(P.w.InView):this.videoWrapperViewportChanges$.next(P.w.OutOfView)})),this.createSkip())}createSkip(){this.widgetSettings.isReelWidget&&(this.skipAd=new E(this.playerWrapperElement))}getPlayerWrapperId(){return this.playerIdsPrefix}createInnerPlayerWrapper(){this.playerWrapperElement&&(this._innerPlayerWrapper=document.createElement("div"),this._innerPlayerWrapper.classList.add("ob-inner-player-wrapper"),this.playerWrapperElement.appendChild(this._innerPlayerWrapper))}createPlayerWrapperElement(){switch(this.widgetSettings.playerLocation){case h.h.AboveWidget:return this.createAboveWidgetPlayerWrapper();case h.h.BelowWidget:return this.createBelowWidgetPlayerWrapper();case h.h.InWidget:default:return this.createInWidgetPlayerWrapper()}}createBelowWidgetPlayerWrapper(){try{const e=this.widgetSettings.playerMaxWidth.horizontal,i=t.Z.getSubtree(this.widgetElement).querySelectorAll(".ob-widget-items-container")||t.Z.getSubtree(this.widgetElement).querySelectorAll(".ob-widget");if(i&&i.length){const t=i[i.length-1];this.playerDimensions=x.getPlayerDimensionsForOuterPlayer(t,this.widgetElement,e,"horizontal");let r=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height,["below-widget"]),n=x.createContainerElement(this.containerId,this.widgetElement,r,!!this.widgetElement.shadowRoot);return null!=n&&(t.parentElement?t.parentElement.insertBefore(n,t.nextSibling):t.appendChild(n)),r}}catch(e){throw new Error(`createBelowWidgetPlayerWrapper(): ${e.toString()}`)}}createAboveWidgetPlayerWrapper(){try{const e=t.Z.getSubtree(this.widgetElement).querySelector(".ob-widget-items-container")||t.Z.getSubtree(this.widgetElement).querySelector(".ob-widget"),i=this.widgetSettings.playerMaxWidth.horizontal;if(e){const t=this.vidgetData.ghostFixedSize?this.widgetElement:e;this.playerDimensions=x.getPlayerDimensionsForOuterPlayer(t,this.widgetElement,i,"horizontal",!!this.vidgetData.ghostFixedSize);let r=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height,["above-widget"]),n=x.createContainerElement(this.containerId,this.widgetElement,r,!!this.widgetElement.shadowRoot);return null!=n&&(e.parentElement?e.parentElement.insertBefore(n,e):e.appendChild(n)),r}}catch(e){throw new Error(`createAboveWidgetPlayerWrapper(): ${e.toString()}`)}}createInWidgetPlayerWrapper(){try{const e=this.vidgetData.firstIndex,i=this.vidgetData.lastIndex,r=t.Z.getSubtree(this.widgetElement).querySelector(".ob-recIdx-"+e),n=t.Z.getSubtree(this.widgetElement).querySelector(".ob-recIdx-"+i);let o;if(this.vidgetData.coveredWidget){const e=t.Z.getSubtree(this.widgetElement).querySelector(".ob-widget > .ob-first")||t.Z.getSubtree(this.widgetElement).querySelector(".ob-widget > .ob-widget-items-container"),i=this.getCoveredPlayerHeight(e,e.clientWidth);o=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",e.clientWidth,i,["in-widget"]),o.style.top="unset";let r=x.createContainerElement(this.containerId,this.widgetElement,o,!!this.widgetElement.shadowRoot);null!=r&&e.insertBefore(r,e.firstChild)}else if(this.vidgetData.isReelWidget){const e=t.Z.getSubtree(this.widgetElement).querySelector(".ob-widget > .ob-reel-track");o=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",this.widgetElement.offsetWidth,r.clientHeight,["in-widget"]),o.style.zIndex="10";let i=x.createContainerElement(this.containerId,this.widgetElement,o,!!this.widgetElement.shadowRoot);this.widgetElement.shadowRoot?o?.parentElement?.style.setProperty("position","unset"):i?.style.setProperty("position","unset"),null!=i&&e.appendChild(i)}else{this.playerDimensions=x.getPlayerDimensions(r,n),o=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height,["in-widget"]);let e=x.createContainerElement(this.containerId,this.widgetElement,o,!!this.widgetElement.shadowRoot,"unset");null!=e&&r.appendChild(e)}return o}catch(e){throw new Error(`createInWidgetPlayerWrapper(): ${e.toString()}`)}}getCoveredPlayerHeight(e,i=0){let r=Math.floor(9*i/16);if(e.clientHeight<r)return e.clientHeight;for(let i of this.vidgetData.indexes){let n=t.Z.getSubtree(this.widgetElement).querySelector(".ob-recIdx-"+(parseInt(i)-1)).getBoundingClientRect().bottom-e.getBoundingClientRect().top;if(n>r){r=n;break}}return r}static getPlayerDimensionsForOuterPlayer(e,i,r,n,o=!1){if(i.getAttribute("data-feed-idx")){const e=t.Z.getSubtree(i).querySelector(".ob-widget-section");return x.getPlayerDimensions(e,null,r,n,o)}return x.getPlayerDimensions(e,null,r,n,o)}static createPlayerWrapperDiv(e,t,i,r){let n=window.document.createElement("div");return n.id=e,n.classList.add("ob-player-wrapper"),r&&r.length>0&&r.forEach((e=>n.classList.add(e))),n.style.setProperty("width",t+"px","important"),n.style.setProperty("height",i+"px","important"),n}static createContainerElement(e,t,i,r=!1,n){if(r){let r="wrapperContainerForShadowDom_"+e,o=t.querySelector("#"+r);o&&o.remove();let a=window.document.createElement("div");return a.id=r,a.appendChild(i),t.appendChild(a),n&&a?.style.setProperty("position",n),null==t?.shadowRoot.querySelector("slot")?window.document.createElement("slot"):null}{let e=window.document.createElement("div");return e.classList.add("obv-video-wrapper"),e.appendChild(i),n&&e?.style.setProperty("position",n),e}}static getPlayerDimensions(e,i=null,r=null,n=null,o=!1){if(o)return{width:e.clientWidth,height:e.clientHeight};{const o=e.getBoundingClientRect();if(i){const r=i.getBoundingClientRect(),n={top:Math.min(o.top,r.top),bottom:Math.max(o.bottom,r.bottom),left:Math.min(o.left,r.left),right:Math.max(o.right,r.right)};let a=t.Z.getSiblingsBetweenRecs(e,i);for(let e of a){let t=e.getBoundingClientRect().bottom;t>n.bottom&&(n.bottom=t)}const s=n.right-n.left,d=n.bottom-n.top;return{width:s&&s>0?s:0,height:d&&d>0?d:0}}{const e=r&&r<o.width?r:o.width;return{width:e,height:null==n||"horizontal"===n?Math.floor(9*e/16):Math.floor(16*e/9)}}}}buildHeaderHTML(){let e,t,i=null,r="";if("string"==typeof this.vidgetData.header)e=this.vidgetData.header,t="inherit",r+=`<div id="${this.playerIdsPrefix}headerWrapper" class="ob_vid_header" >${e}</div>`;else{let n=this.playerWrapperElement.closest(".ob-widget-section");n&&(i=n.getElementsByClassName("ob-widget-header")[0],i&&(e=i.textContent,t=window.getComputedStyle(i,null).getPropertyValue("font-family"),r+=`<div id="${this.playerIdsPrefix}headerWrapper" class="ob_vid_header">${e}</div>`))}this.widgetSettings.brandingTag&&this.widgetSettings.isTopBranding&&(r=r+'<div id="'+this.playerIdsPrefix+'videoBranding">'+this.widgetSettings.brandingTag+"</div>");const n=this.widgetSettings.widgetID+"_ob_vid_hd";if(!document.querySelector("#"+n)){let e=document.createElement("style"),i=t?`font-family:${t}`:"";e.innerHTML=`.ob_vid_header {display:none; ${i}}`,e.id=n,document.body.appendChild(e)}return r}appendPlayer(e){this._innerPlayerWrapper.appendChild(e)}getPlayerWrapperDimensions(){return{width:this._innerPlayerWrapper.offsetWidth,height:this._innerPlayerWrapper.clientHeight}}showPlayer(e){this.playerWrapperElement.classList.remove("obv-hide-wrapper"),[...this._innerPlayerWrapper.children].forEach((t=>{t.classList.remove("obv-playing"),t.getAttribute("id")?.endsWith(e.getPlayerSuffix())&&t.classList.add("obv-playing")}))}hideAllPlayers(){this.destroySlider().then((()=>{this.playerWrapperElement.classList.add("obv-hide-wrapper"),[...this._innerPlayerWrapper.children].forEach((e=>{e.classList.remove("obv-playing")})),this.removeFooterAndHeaderContent(),this.restorePlayerWrapperHeight()}))}onVideoStartPlaying(e){if(this.isHeightChangeAllowed()){const{width:t,height:i}=e.getVideoDimensions();this.adjustVideoHeight(t,i);const r=e.getFooterAndHeaderElements();this.setFooterAndHeader(r)}this.handleSlider(e),this.handleSkip(e),this.handleTitle()}handleTitle(){if(null!=this.vidgetData.title&&""!==this.vidgetData.title){const e=document.createElement("div");e.classList.add("obv-title-wrapper"),e.innerText=this.vidgetData.title,this.playerWrapperElement.append(e)}}handleSlider(e){if(null==this.widgetSettings.stickyPlayer)return;const{width:t,height:i}=this.playerWrapperElement.getBoundingClientRect(),r=(this.vidgetData.sticky?.width||400)*i/t,n={sliderClassname:"ob-sticky",placeholderClassname:"outbrain-place-holder-wrapper",sliderEntry:"side"===this.vidgetData.sticky?.sliderEntry?w.Sideways:w.BottomUp,sliderHeight:r,sliderWidth:this.vidgetData.sticky?.width,sliderPosition:this.vidgetData.sticky?.sliderPosition,verticalMargin:this.vidgetData.sticky?.sliderPercentBottom?this.vidgetData.sticky.sliderPercentBottom+"%":"30px",horizontalMargin:"2px",sliderMode:this.widgetSettings.stickyPlayer};this.slider=new S(this.playerWrapperElement,n,(t=>{t.prev.isSliderActive!==t.next.isSliderActive&&t.next.isSliderActive?e.resize(t.next.width,t.next.height):t.prev.isSliderActive===t.next.isSliderActive||t.next.isSliderActive||e.resize(this.playerDimensions.width,this.playerDimensions.height)}))}destroySlider(){return new Promise((e=>{this.slider?this.slider?.destroySlider().then((()=>{this.slider=null,e()})):e()}))}handleSkip(e){if(!this.widgetSettings.isReelWidget)return;this.skipAd?.reset((()=>{e.skipAd()}))}createHeader(e){this.headerWrapper=document.createElement("div"),this.headerWrapper.classList.add("obv-header-wrapper"),this.headerWrapper.appendChild(e),this.playerWrapperElement.prepend(this.headerWrapper)}createFooter(e){this.footerWrapper=document.createElement("div"),this.footerWrapper.classList.add("obv-footer-wrapper"),this.footerWrapper.appendChild(e),this.playerWrapperElement.append(this.footerWrapper)}setFooterAndHeader(e){(this.headerWrapper||this.footerWrapper)&&this.removeFooterAndHeaderContent();const t=this.playerWrapperElement.getBoundingClientRect().height;e?.footer&&this.createFooter(e.footer),e?.header&&this.createHeader(e.header),this.playerWrapperElement.style.height=t+(this.footerWrapper?.getBoundingClientRect().height||0)+(this.headerWrapper?.getBoundingClientRect().height||0)+"px"}removeFooterAndHeaderContent(){this.footerWrapper?.remove(),this.headerWrapper?.remove()}restorePlayerWrapperHeight(){this.playerDimensions?.height&&(this.playerWrapperElement.style.height=this.playerDimensions.height+"px")}adjustVideoHeight(e,t){if(!e||!t)return;const i=e/t,r=this.playerWrapperElement.getBoundingClientRect().width/i,n=this.widgetSettings.playerMaxWidth.vertical||Number.MAX_VALUE;this.playerWrapperElement.style.height=Math.min(r,n)+"px"}isHeightChangeAllowed(){return!(this.widgetSettings.playerLocation===h.h.InWidget||this.vidgetData.ghostFixedSize)}destroy(){const e=this.destroySlider();return e.then((()=>{this.videoWrapperViewportSubscription?.unsubscribe();const e=this.playerWrapperElement.parentElement;e&&e.classList.contains("obv-video-wrapper")?e.remove():this.playerWrapperElement.remove()})),e}}var I=n(3379),W=n.n(I),T=n(7795),V=n.n(T),C=n(569),O=n.n(C),R=n(3565),D=n.n(R),A=n(9216),_=n.n(A),k=n(4589),M=n.n(k),N=n(8048),F={};F.styleTagTransform=M(),F.setAttributes=D(),F.insert=O().bind(null,"head"),F.domAPI=V(),F.insertStyleElement=_();W()(N.Z,F),N.Z&&N.Z.locals&&N.Z.locals;const B=e=>{"true"===new URL(window.location.href).searchParams.get("dlog")&&console.log(e)};var L=n(6716),z=n(1480),H=n(8639),q=n(8474);function $(e,t,i){void 0===e&&(e=0),void 0===i&&(i=H.P);var r,n=-1;return null!=t&&((r=t)&&(0,q.m)(r.schedule)?i=t:n=t),new z.y((function(t){var r=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-i.now():e;r<0&&(r=0);var o=0;return i.schedule((function(){t.closed||(t.next(o++),0<=n?this.schedule(void 0,n):t.complete())}),r)}))}class U{time;timeElapsed=0;timer=null;subscription=null;update=new L.x;constructor(e){this.time=e}start(){const e=1e3;return this.timer=$(e,e),this.subscription=this.timer.subscribe((()=>{this.timeElapsed=this.timeElapsed+e,this.timeElapsed>=this.time&&(this.update.next(this.timeElapsed),this.subscription?.unsubscribe())})),this.update}pause(){this.stop()}resume(){this.timer||this.start()}stop(){this.timer&&(this.subscription?.unsubscribe(),this.timer=null)}}var Z,j=n(8178),G=n(6022);!function(e){e[e.Never=0]="Never",e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.High=3]="High",e[e.Severe=4]="Severe"}(Z||(Z={}));class J{widgetSettings;previousProvider=null;constructor(e){this.widgetSettings=e}getDefaultPriority(e){return[...new Set([...e.map((e=>e.getProviderName()))])].reduce(((e,t)=>({...e,[t]:Z.Medium})),{})}getHighestPriority(e){return Math.max(...Object.values(e))}setPriority(e,t){Object.keys(e).forEach((i=>{const r=this.widgetSettings.providers.find((e=>i===e.name));i===d.B.NATIVETOVIDEO&&(e[i]=Z.Low),r?.playMode!==v.Z.ViewPreload&&r?.playMode!==v.Z.View&&r?.currentPlayMode!==P.w.InView||(e[i]=t?Z.High:Z.Never),this.previousProvider?.getProviderName()===d.B.NATIVETOVIDEO&&i===d.B.NATIVETOVIDEO&&(e[i]=Z.Never)}))}getNextProviderName(e,t){const i=this.getDefaultPriority(e);this.setPriority(i,t);const r=this.getHighestPriority(i);return Object.keys(i).find((e=>i[e]===r&&i[e]!==Z.Never))}setPreviousProvider(e){this.previousProvider=e}}class Q{sessionId;callbacks;audit;widgetSettings;vidgetData;providers=[];pendingPlayProviders=[];playerWrapperManager;viewabilityMeasurementSubscription;numOfPlays=0;activeProvider=null;providersState={};statusChange$;isVideoPlayed=!1;engagePlayTimer=null;engagePlayTimerSub$;currentWidget;vidgetTimeout=null;adQueue=null;get id(){return this.sessionId}constructor(t,i,r={}){this.sessionId=t,this.callbacks=r;try{this.currentWidget=i,this.widgetSettings=this.createWidgetSettings(i),this.vidgetData=g.getVidgetData(i,this.widgetSettings.containerID),this.adQueue=new J(this.widgetSettings)}catch(e){throw this.destroy(),new Error(e)}this.audit=new b(t,this.widgetSettings,this.vidgetData),this.statusChange$=new a.X(e.Initialized),this.sendEvent({event:s.t.Loaded}),B(`Vidget: obVideo loaded for widget ${this.widgetSettings.reportedWidgetId} and sub-widget ${this.widgetSettings.reportedSubWidgetId}`)}createWidgetSettings(e){return c.r.getWidgetSettings(e)}createPlayerWrapper(){this.playerWrapperManager=new x(this.widgetSettings,this.vidgetData);try{this.playerWrapperManager.create(),this.playerWrapperManager.hideAllPlayers()}catch(e){this.sendEvent({event:s.t.Error,description:e.toString()})}}registerToVideoWrapperViewportChanges(){this.playerWrapperManager.videoWrapperViewportChanges$.subscribe((t=>{this.statusChange$.value===e.NotPlaying&&t===P.w.InView&&this.pendingPlayProviders.length>0&&this.statusChange$.next(e.ReadyToPlay),this.providers.forEach((e=>{e.onViewabilityChange(t)})),t!==P.w.InView||this.activeProvider?.isPlayerPaused()?this.pauseEngagePlayMeasurement():this.resumeEngagePlayMeasurement()}))}async createProvider(e){const t=Object.keys(d.B).find((t=>t===e.name));if(null==t)return null;const i=l.fP.providers[t].providerPath;let r;try{r=await n(5434)(`./${i}`)}catch(e){console.error(e)}const o=this.playerWrapperManager.getPlayerWrapperId(),a=this.playerWrapperManager.getPlayerWrapperDimensions(),s=new r.Provider(this.widgetSettings,this.vidgetData,e,o,a,this.currentWidget);return this.providers.push(s),s}onAdLoaded(t){B("Vidget: got ad loaded from "+t.getProviderName()),this.providersState[t.getProviderName()].loadedAds++,this.pendingPlayProviders.push(t),this.statusChange$.value!==e.Playing&&this.statusChange$.value!==e.ReadyToPlay&&this.statusChange$.next(e.ReadyToPlay)}sendEvent(e,t){this.audit.send(e.event,{currentReload:this.numOfPlays,activeProvider:this.activeProvider?.getProviderName(),provider:t?.getProviderName(),description:e.description,isViewablePlay:t?.isViewabilityReached,...e.extraParams,...t?.getProviderAuditParams(),...this.playerWrapperManager?.getAuditParams(),providersStatus:JSON.stringify(this.providersState)})}onPlayerStatusChange(e,t){switch(t.event){case s.t.ProviderPass:B(`Vidget: provider ${e.getProviderName()} reported no more ads found`),e.getProviderName()===this.activeProvider?.getProviderName()&&this.skipCurrentProvider(e),this.destroyProvider(e),0===this.providers.length&&(B("Vidget: all providers reported no ad found, running post video run flow"),this.execPostVideoRunFlow());break;case s.t.AdLoaded:this.onAdLoaded(e)}if(e.getProviderName()===this.activeProvider?.getProviderName())switch(t.event){case s.t.Close:return this.sendEvent(t,e),void this.destroy();case s.t.Skip:case s.t.Error:case s.t.Complete:this.skipCurrentProvider(e);break;case s.t.Pause:this.onPlayerPause();break;case s.t.Resume:this.onPlayerResume(e);break;case s.t.Play:this.playerWrapperManager.showPlayer(e),this.startViewabilityMeasurement(e),this.measureEngagedPlay(e),this.playerWrapperManager.onVideoStartPlaying(e),this.providersState[e.getProviderName()].playedAds++,this.fireExternalPixels()}this.sendEvent(t,e)}skipCurrentProvider(e){this.adQueue?.setPreviousProvider(this.activeProvider),this.activeProvider=null,this.stopViewabilityMeasurement(),this.stopEngagePlayMeasurement(),this.playerWrapperManager.hideAllPlayers(),e.onPlayerHide().then((()=>{this.playNextProvider(!1)}))}onPlayerPause(){this.stopViewabilityMeasurement(),this.pauseEngagePlayMeasurement()}onPlayerResume(e){this.startViewabilityMeasurement(e),this.resumeEngagePlayMeasurement()}stopViewabilityMeasurement(){this.viewabilityMeasurementSubscription?.unsubscribe()}startViewabilityMeasurement(e){const t={threshold:this.widgetSettings.viewabilityPercentageThreshold/100,timeInMilliseconds:1e3*this.widgetSettings.viewabiltyEventTime};this.viewabilityMeasurementSubscription=P.J.measureViewability(this.playerWrapperManager.innerPlayerWrapper,t).subscribe((t=>{e.onViewabilityReached(t),this.sendEvent({event:s.t.Viewability,description:"viewability percentage threshold: "+this.widgetSettings.viewabilityPercentageThreshold,extraParams:{viewability:t}},e),this.stopViewabilityMeasurement()}))}playNextProvider(t){if(this.numOfPlays>=this.widgetSettings.configuredReloadCount)return B(`Vidget: configured reload count is ${this.widgetSettings.configuredReloadCount} and num of plays is ${this.numOfPlays}, finishing playing vidget`),void this.statusChange$.next(e.Finished);if(!t&&r.shouldHoldVidgetByParallelPlayPolicy(this,[]))return this.statusChange$.next(e.NotPlaying),void(this.pendingPlayProviders.length>0&&this.statusChange$.next(e.ReadyToPlay));if(this.isVideoPlayed&&this.widgetSettings.isReelWidget)return this.statusChange$.next(e.NotPlaying),this.isVideoPlayed=!1,void(this.pendingPlayProviders.length>0&&this.statusChange$.next(e.ReadyToPlay));if(0===this.pendingPlayProviders.length)return B("Vidget: pendingPlayProviders is empty"),void this.statusChange$.next(e.NotPlaying);const i=this.extractNextProvider(this.pendingPlayProviders);if(null==i)return B("Vidget: nextProvidrIsNull"),void this.statusChange$.next(e.NotPlaying);this.activeProvider=i,setTimeout((()=>{this.playNextAd(i)}),t&&this.widgetSettings.vidgetN2vBackfill!==G.t.AfterEach?0:this.widgetSettings.configuredReloadTime)}playNextAd(t){this.clearVidgetTimeout(),B("Vidget: telling provider "+t.getProviderName()+" to play"),t.playLoadedAd(),this.numOfPlays++,this.isVideoPlayed=!0,this.stopViewabilityMeasurement(),this.statusChange$.value!==e.Playing&&this.statusChange$.next(e.Playing)}extractNextProvider(e){const t=this.adQueue?.getNextProviderName(e,this.isInView()||!1),i=e.findIndex((e=>{if(e.getProviderName()===t)return e}));return-1!==i?e.splice(i,1)[0]:null}load(){this.createPlayerWrapper(),this.registerToVideoWrapperViewportChanges(),this.applyVideoWidgetTimeout();let e=[];this.widgetSettings.vidgetN2vBackfill===G.t.AfterEach&&(e=j.d.providers?.filter((e=>e.name===d.B.NATIVETOVIDEO))||[]),this.loadProviders([...this.widgetSettings.providers,...e])}loadProviders(e){e.forEach((async e=>{B("Vidget: about to init "+e.name);const t=await this.createProvider(e);null!=t&&(this.providersState[t.getProviderName()]={playedAds:0,loadedAds:0},t.onViewabilityChange(this.playerWrapperManager.videoWrapperViewportChanges$.value),this.createProviderPlayer(t))}))}createProviderPlayer(e){e.createPlayer().then((t=>{B("Vidget: player initiated "+e.getProviderName()),this.playerWrapperManager.appendPlayer(t),this.registerToProviderChanges(e)}))}registerToProviderChanges(e){e.stateChanges$.subscribe((t=>{this.onPlayerStatusChange(e,t)}))}startPlaying(){this.playNextProvider(!0)}getPlayMode(){return this.widgetSettings.parallelPlay}isInApp(){return this.vidgetData?.inAppBridge||!1}getPlayersWrapperElement(){return this.playerWrapperManager?.innerPlayerWrapper}isInView(){return this.playerWrapperManager.videoWrapperViewportChanges$?.value===P.w.InView}isInstream(){return!1}measureEngagedPlay(e){this.engagePlayTimer=new U(3e4),this.engagePlayTimerSub$=this.engagePlayTimer.start().subscribe((()=>{this.stopEngagePlayMeasurement(),this.sendEvent({event:s.t.EngagedPlay,extraParams:{videoProgress:Math.round(e.getProviderAuditParams().videoProgress/1e3),viewability:this.playerWrapperManager.getCurrentViewability()}})})),this.isInView()||this.pauseEngagePlayMeasurement()}resumeEngagePlayMeasurement(){this.engagePlayTimer?.resume()}pauseEngagePlayMeasurement(){this.engagePlayTimer?.pause()}stopEngagePlayMeasurement(){this.engagePlayTimer?.stop(),this.engagePlayTimerSub$?.unsubscribe()}fireExternalPixels(){this.widgetSettings.vidgetExternalImpressionPixels&&t.Z.firePixels(this.widgetSettings.vidgetExternalImpressionPixels,this.widgetSettings,this.vidgetData,null,(e=>{this.sendEvent({event:s.t.PixelFired,description:e.substring(0,75)})}))}destroyProvider(e){e.stateChanges$.unsubscribe(),e.destroy(),this.providers=this.providers.filter((t=>t.getProviderName()!==e.getProviderName()))}destroy(){B("Vidget: destroying"),this.stopViewabilityMeasurement(),this.stopEngagePlayMeasurement(),this.playerWrapperManager?this.playerWrapperManager.destroy().then((()=>{this.destroyProviders()})):this.destroyProviders()}destroyProviders(){this.providers?.forEach((e=>{this.destroyProvider(e)}))}execPostVideoRunFlow(){if(this.vidgetTimeout&&this.clearVidgetTimeout(),this.widgetSettings.vidgetN2vBackfill!==G.t.AfterAll||0!==this.numOfPlays)this.statusChange$.next(e.Finished);else{this.widgetSettings.configuredReloadCount=1;const e=j.d.providers?.find((e=>e.name===d.B.NATIVETOVIDEO));this.loadProviders([e])}}applyVideoWidgetTimeout(){this.widgetSettings.vidgetTimeout&&(this.vidgetTimeout=setTimeout((()=>{B(`Vidget: vidgetTimeout of ${this.widgetSettings.vidgetTimeout} reached, running post video run flow`),this.sendEvent({event:s.t.Debug,description:`Vidget: vidgetTimeout of ${this.widgetSettings.vidgetTimeout} reached`}),this.destroyProviders(),this.execPostVideoRunFlow()}),this.widgetSettings.vidgetTimeout))}clearVidgetTimeout(){clearTimeout(this.vidgetTimeout),this.vidgetTimeout=null}}var X;n(7656);!function(e){e.onPlay="onPlay",e.onPaidPlay="onPaidPlay",e.onReady="onReady",e.onClose="onClose",e.onOrganicClose="onOrganicClose",e.onCompleteReloads="onCompleteReloads"}(X||(X={}));var K=n(9202),Y=n(7917);class ee extends Q{createWidgetSettings(e){let t=super.createWidgetSettings(e);return t.forceVI&&(t=ee.overrideWidgetSettings(t)),t}static overrideWidgetSettings(e){return{...e,...Y.ViStaticSettings}}createProviderPlayer(t){this.playerWrapperManager.appendPlayer(t.getPlayerElement()),this.activeProvider=t,this.statusChange$.next(e.ReadyToPlay),this.statusChange$.subscribe((i=>{i===e.Playing&&t.createPlayer().then((()=>{B("Vidget - instream: player initiated "+t.getProviderName()),this.registerToProviderChanges(t)}))}))}playNextProvider(){this.playNextAd(this.activeProvider),this.playerWrapperManager.showPlayer(this.activeProvider)}skipCurrentProvider(e){this.stopViewabilityMeasurement(),this.stopEngagePlayMeasurement()}isInstream(){return!0}}class te{vidgets=[];startPlayingTimeout=null;async init(e,i,n={}){const o=t.Z.guid(),a=te.initiateProviderManager(o,e,n);a.statusChange$.subscribe((e=>{this.onVidgetStatusChange(a,e)})),r.shouldDisposeVidget(a.getPlayMode(),a.getPlayersWrapperElement())?te.destroyVidgetDueToStrictMode(a):setTimeout((()=>{a.load(),this.vidgets.push(a)}),a.isInApp()?5e3:0)}static initiateProviderManager(e,t,i){return c.r.getWidgetRequest(t,"vid",K.S.outstream)===K.S.outstream?new Q(e,t,i):new ee(e,t,i)}getHLRVidgetEligibleToPlay(t){return this.vidgets.find((i=>i.widgetSettings.isReelWidget&&i.widgetSettings.widgetIdx==t&&i.statusChange$.value===e.ReadyToPlay))}play(e){const t=this.getHLRVidgetEligibleToPlay(e);if(t){if(r.shouldDisposeVidget(t.getPlayMode(),t.getPlayersWrapperElement()))return te.destroyVidgetDueToStrictMode(t),!1;if(!r.shouldHoldVidgetByParallelPlayPolicy(t,this.vidgets))return t.startPlaying(),!0;t.sendEvent({event:s.t.Pending,description:`hlr providersManager with parallelPlay policy: ${t.getPlayMode()} is pending`}),setTimeout((()=>{te.callWidgetCallback(t.callbacks,X.onReady,t.widgetSettings.widgetIdx)}),1e3)}return!1}onVidgetStatusChange(t,i){switch(i){case e.ReadyToPlay:te.callWidgetCallback(t.callbacks,X.onReady,t.widgetSettings.widgetIdx),t.widgetSettings.isReelWidget||this.onVidgetReadyToPlay(t);break;case e.Playing:te.callWidgetCallback(t.callbacks,X.onPlay,t.widgetSettings.widgetIdx);break;case e.NotPlaying:te.callWidgetCallback(t.callbacks,X.onClose,t.widgetSettings.widgetIdx),this.playNextVidget();break;case e.Finished:case e.Failure:te.callWidgetCallback(t.callbacks,X.onClose,t.widgetSettings.widgetIdx),this.removeVidget(t),this.playNextVidget()}}static callWidgetCallback(e,t,i){e&&e[t]&&e[t](i)}onVidgetReadyToPlay(e){null!=this.vidgets.find((t=>t.id===e.id))&&(r.shouldDisposeVidget(e.getPlayMode(),e.getPlayersWrapperElement())?te.destroyVidgetDueToStrictMode(e):r.shouldHoldVidgetByParallelPlayPolicy(e,this.vidgets)?(e.sendEvent({event:s.t.Pending,description:`providersManager with parallelPlay policy: ${e.getPlayMode()} is pending`}),clearTimeout(this.startPlayingTimeout),this.startPlayingTimeout=setTimeout((()=>{this.onVidgetReadyToPlay(e)}),5e3)):e.startPlaying())}static destroyVidgetDueToStrictMode(e){e.sendEvent({event:s.t.VidgetConfigError,description:`Other video exists on page, parallelPlay policy: ${e.getPlayMode()}`}),e.destroy()}removeVidget(e){const t=e.id;e.destroy(),this.vidgets.splice(this.vidgets.findIndex((e=>e.id===t)),1)}playNextVidget(){let t=this.vidgets.filter((t=>t.statusChange$.value===e.ReadyToPlay&&!t.widgetSettings.isReelWidget));if(0!==t.length)if(1===t.length)t[0].startPlaying();else{const e=t.filter((e=>e.isInView()));0===e.length?t[0].startPlaying():1===e.length&&e[0].startPlaying()}}reloadObVideo(){this.destroy(),window.OB_VIDEO=window.OB_VIDEO||new te}destroy(){this.vidgets.forEach((e=>{e.destroy()})),delete window.OB_VIDEO}}window.OB_VIDEO=window.OB_VIDEO||new te,window.OB_PROXY?window.OB_PROXY.makeHandshake("OB_VIDEO"):console.log("no ob-proxy")}()}();